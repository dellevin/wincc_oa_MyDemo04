V 14
4
LANG:10001 17 Laboratory values
LANG:10004 15 实验室数值
LANG:10000 10 Laborwerte
LANG:10027 41 Лабораторные значения
PANEL,-1 -1 699 578 N "_3DFace" 0
E E E E E 1 -1 -1 0  5 60
"refFileName"0  1
E "cmdClose()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }

  PanelOff();
}
" 0
 3
"CBRef" "1"
"EClose" "main()
{
  cmdClose();
}" 0

"dpi" "120"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
4
LANG:10001 6 Layer1
LANG:10004 6 Layer1
LANG:10000 6 Layer1
LANG:10027 6 Layer1
10 27
"Polyline1"
""
1 163 538 E E E 1 E 1 E N "_Window" E N "_Transparent" E E
 E E
14 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 2 1 0 1 E 1 0 0.7586206896551724 0 89.86206896551725 0 E 3 163 538
163 567
10 567
 0
6 29
"busySize"
""
1 14 542 E E E 1 E 1 E N "_3DFace" E N "_Transparent" E E
 E E
16 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E 1 0 1 0 -41 0 E 14 542 158 559
6 30
"busyFlag"
""
1 16 545 E E E 1 E 0 E N {0,0,153} E N {0,0,153} E E
 E E
17 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"main()
{
  addGlobal(\"g_busyThread\",INT_VAR);
  g_busyThread = -1;
}" 0
 E 0 1 1 0 1 E 1 0 1 -1 -43 1 E 16 545 52 560
2 69
"Text2"
""
1 445 100 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
18 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 368 27 390 42
0 0 0 "0s" 0 0 0 194 0 0  390 27 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 3 DP:
LANG:10004 3 DP:
LANG:10000 3 DP:
LANG:10027 3 DP:
2 71
"Text5"
""
1 968 183 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
19 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 22 60 105 75
0 0 0 "0s" 0 0 0 194 0 0  105 60 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 12 Description:
LANG:10004 7 描述:
LANG:10000 13 Beschreibung:
LANG:10027 17 Описание:
2 72
"Text19"
""
1 109 242 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
20 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 79 122 105 137
0 2 2 "0s" 0 0 0 194 0 0  105 122 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 5 From:
LANG:10004 7 起始:
LANG:10000 4 Von:
LANG:10027 3 С:
2 74
"Text25"
""
1 1184 237 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
21 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 59 27 105 42
0 0 0 "0s" 0 0 0 194 0 0  105 27 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 8 DP type:
LANG:10004 9 DP类型:
LANG:10000 7 DP-Typ:
LANG:10027 10 Тип DP:
2 75
"Text1"
""
1 1061 373 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
22 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 365 122 388 137
0 2 2 "0s" 0 0 0 194 0 0  388 122 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 3 To:
LANG:10004 9 终止：
LANG:10000 4 Bis:
LANG:10027 6 По: 
2 99
"script"
""
1 278 -1547.092786801342 E E E 1 E 0 E N {0,0,0} E N {255,255,0} E E
 E E
29 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"main()
{
  lwSetPropValues();
}" 0
 E 0 1 1 0 1 E 1 0 1.047619047619048 -25 -130.952380952381 1 E 640 335 676 350
1 2 0 "0s" 0 0 0 192 0 0  640 335 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 6 Script
LANG:10004 6 脚本
LANG:10000 6 Script
LANG:10027 6 Script
2 110
"lines_text"
""
1 2223 1212.5 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
36 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 492 500.5 530 516
0 0 0 "0s" 0 0 0 194 0 0  530 500.5 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 6 Lines:
LANG:10004 4 行:
LANG:10000 7 Zeilen:
LANG:10027 13 Строки:
14 85
"dpt"
""
1 984.9999999999998 994 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
9 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  113 23 357 49
2 "0s" 0 0 0 0 0 -1  E E E
13 89
"help"
""
1 2448 2293 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
8 0 0 0 112 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  8 543 106 571

T 
4
LANG:10001 4 Help
LANG:10004 6 帮助
LANG:10000 5 Hilfe
LANG:10027 14 Справка
"main()
{
  std_help( \"ac_labor_value\" );
}" 0
 E E E
14 82
"dp"
""
1 642 160 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  398 23 677 49
2 "0s" 0 0 0 0 0 -1  E E E
14 78
"comment"
""
1 230.8620689655173 146 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
11 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  113 58 677 84
2 "0s" 0 0 0 0 0 -1  E E E
14 86
"start"
""
1 575.8 949 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
12 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  113 118 357 144
2 "0s" 0 0 0 0 0 -1  E E E
14 87
"stop"
""
1 1445 1089 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
13 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  398 118 677 144
2 "0s" 0 0 0 0 0 -1  E E E
13 90
"accept"
""
1 2928 2333 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
7 0 0 0 0 0
E E E
0
4
LANG:10001 14 Accept changes
LANG:10004 12 接受更改
LANG:10000 23 Änderungen übernehmen
LANG:10027 37 Применить изменения

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  488 543 586 571

T 
4
LANG:10001 5 Apply
LANG:10004 6 应用
LANG:10000 11 Übernehmen
LANG:10027 18 Применить
"main()
{
  int        iCount, iTime;
  dyn_string dsLine;

  anytype    aValue;
  anytype    aValueSave;
  bool       bInvalid;
  bool       bInvalidSave;
  time       tValue;
  string     sDp;

  time       tArchive;
  string     sConfig;
  dyn_float  dfResult;
  dyn_string dsResult;
  int        iErr;
  string     sErr;
  int        n;

  bool       bErrFormat;
  string     sErrFormat;
  bool       bValue;
  char       cValue;
  int        iValue;
  unsigned   uValue;
  float      fValue;

  string     sDptPanel;
  string     sDpPanel;
  string     sCommentPanel;
  string     sStartPanel;
  string     sStopPanel;
  dyn_string dsDpListPanel;
  time       tStartPanel;
  time       tStopPanel;


  // Read data from panel
  sErr = \"\";
  sErrFormat = \"\";
  getValue( \"table\", \"lineCount\", iCount );

  this.enabled = false;
  for( n = 0; n <= iCount -1; n ++ )
  {
    getValue( \"table\", \"getLineN\", n, dsLine );

    // Check if data changed
    aValue       = dsLine[5];
    aValueSave   = dsLine[6];
    bInvalid     = dsLine[8];
    bInvalidSave = dsLine[9];

    if(( aValue != aValueSave ) || ( bInvalid != bInvalidSave ))
    {
      // Somtehing changed
      if((strpos(dsLine[1],\":\") > 0) || (strpos(dsLine[1],\"/\") > 0) || (strpos(dsLine[1],\".\") > 0))
         tValue      = dsLine[1];
      else
         setPeriod( tValue, dsLine[1]);
      sDp        = dsLine[3];
      bErrFormat = false;

      // Check data if format ok
      // Check bit
      if( dpElementType( sDp ) == BOOL_VAR )
      {
        bValue = aValue;
        if( bValue != aValue )
          bErrFormat = true;
      }

      // Check char
      if( dpElementType( sDp ) == CHAR_VAR )
      {
        cValue = aValue;
        if( cValue != aValue )
          bErrFormat = true;
      }

      // Check int
      if( dpElementType( sDp ) == INT_VAR )
      {
        iValue = aValue;
        if( iValue != aValue )
          bErrFormat = true;
      }

      // Check unsigned
      if( dpElementType( sDp ) == UINT_VAR )
      {
        uValue = aValue;
        if( uValue != aValue )
          bErrFormat = true;
      }

      // Check float
      if( dpElementType( sDp ) == DPEL_FLOAT )
      {
//        string sValue;

//        sscanf(aValue,\"%f\",fValue);
//        if( fValue != aValue )
//          bErrFormat = true;
      }

      // Check time
      if( dpElementType( sDp ) == TIME_VAR )
      {
        tValue = aValue;
        if( tValue != aValue )
          bErrFormat = true;
      }

      // Check DP
      if( dpElementType( sDp ) == DPIDENTIFIER_VAR )
      {
        if( !dpExists( sDp ))
          bErrFormat = true;
      }

      // check if an error occured
      if( bErrFormat )
        sErrFormat += sDp + \": \" + aValue + \"|\";
      else
      {
        // Check if the value at this time is the last value in the database
        dpGet( sDp + \":_online.._stime\", tArchive );

        if( tValue > tArchive )
          sConfig = \":_original..\";
        else
          sConfig = \":_corr..\";

        // Set data into database
        iErr = 0;
        iErr = dpSetTimed( tValue, sDp + sConfig + \"_value\",     aValue );
  //                                 sDp + \":_corr..\" + \"_exp_inv\", bInvalid );
        if( iErr != 0 )
        {
          sErr += sDp + \": \" + aValue + \"\\n\";
        }
      }
    }
  }
  // Display errors
  if( strlen( sErrFormat ) > 0 )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfoList\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"valueWrongFormat\" ),
                                                   sErrFormat,
                                                   getCatStr( \"general\", \"OK\" )),
                                    dfResult, dsResult );
    return;
  }

  if( strlen( sErr ) > 0 )
    ChildPanelOnCentralModalReturn( \"vision/MessageInfoList\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"valueNotSet\" ),
                                                   sErr,
                                                   getCatStr( \"general\", \"OK\" )),
                                    dfResult, dsResult );

  // Set the values in database
  getMultiValue( \"dpt\",       \"text\",  sDptPanel,
                 \"dp\",        \"text\",  sDpPanel,
                 \"comment\",   \"text\",  sCommentPanel,
                 \"startSave\", \"text\",  sStartPanel,
                 \"stopSave\",  \"text\",  sStopPanel,
                 \"dpList\",    \"items\", dsDpListPanel );

  tStartPanel = sStartPanel;
  tStopPanel  = sStopPanel;
  lwGetValue( sDptPanel,
              sDpPanel,
              sCommentPanel,
              tStartPanel,
              tStopPanel,
              dsDpListPanel );
  this.enabled = TRUE;
}
" 0
 E E E
13 88
"properties"
""
1 2935.595238095238 2408 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
6 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 458 686 486

T 
4
LANG:10001 10 Properties
LANG:10004 6 属性
LANG:10000 13 Eigenschaften
LANG:10027 18 Настройки
"main()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }

  lwSetPropValues();
}
" 0
 E E E
13 94
"yesterday"
""
1 1948 648 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
5 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 428 686 456

T 
4
LANG:10001 9 Yesterday
LANG:10004 6 昨天
LANG:10000 7 Gestern
LANG:10027 10 Вчера
"main()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;

  string     sDpt;
  string     sDp;
  string     sComment;
  dyn_string dsDpList;
  time       tNow;
  int        iStartHour;
  time       tStart;
  time       tStop;

  int        iStart;
  int        iStop;
  int        iPeriode;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }


  getMultiValue( \"dpt\",      \"text\",  sDpt,
                 \"dp\",       \"text\",  sDp,
                 \"comment\",  \"text\",  sComment,
                 \"dpList\",   \"items\", dsDpList );

  tNow   = getCurrentTime();
  dpGet( \"_Config.StartHour:_online.._value\", iStartHour );
  tStart = makeTime( year( tNow ), month( tNow ), day( tNow ) -1, iStartHour, 0, 0 );
  tStop  = makeTime( year( tNow ), month( tNow ), day( tNow ),    iStartHour, 0, 0 ) - 0.001;

  // Calculate period
  iStart = tStart;
  iStop  = tStop;
  iPeriode = 86400;

  periode.text = iPeriode;

  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStop += 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStop -= 3600;

  lwGetValue( sDpt,
              sDp,
              sComment,
              tStart,
              tStop,
              dsDpList );
}
" 0
 E E E
13 64
"today"
""
1 1328 388 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
4 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 398 686 426

T 
4
LANG:10001 5 Today
LANG:10004 6 今天
LANG:10000 5 Heute
LANG:10027 14 Сегодня
"main()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;

  string     sDpt;
  string     sDp;
  string     sComment;
  dyn_string dsDpList;
  time       tNow;
  int        iStartHour;
  time       tStart;
  time       tStop;

  int        iStart;
  int        iStop;
  int        iPeriode;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }


  getMultiValue( \"dpt\",      \"text\",  sDpt,
                 \"dp\",       \"text\",  sDp,
                 \"comment\",  \"text\",  sComment,
                 \"dpList\",   \"items\", dsDpList );

  tNow   = getCurrentTime();
  dpGet( \"_Config.StartHour:_online.._value\", iStartHour );
  tStart = makeTime( year( tNow ), month( tNow ), day( tNow ),    iStartHour, 0, 0 );
  tStop  = makeTime( year( tNow ), month( tNow ), day( tNow ) +1, iStartHour, 0, 0 ) - 0.001;

  // Calculate period
  iStart = tStart;
  iStop  = tStop;
  iPeriode = 86400;

  periode.text = iPeriode;

  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStop += 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStop -= 3600;

  lwGetValue( sDpt,
              sDp,
              sComment,
              tStart,
              tStop,
              dsDpList );
}
" 0
 E E E
13 93
"periodMinus"
""
1 4148 2658 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
3 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 368 686 396

T 
4
LANG:10001 8 Period -
LANG:10004 8 期间 -
LANG:10000 9 Periode -
LANG:10027 14 Период -
"main()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;

  string     sDpt;
  string     sDp;
  string     sComment;
  string     sStart;
  string     sStop;
  dyn_string dsDpList;
  int        iPeriode;
  time       tStart;
  time       tStop;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }


  getMultiValue( \"dpt\",       \"text\",  sDpt,
                 \"dp\",        \"text\",  sDp,
                 \"comment\",   \"text\",  sComment,
                 \"startSave\", \"text\",  sStart,
                 \"stopSave\",  \"text\",  sStop,
                 \"dpList\",    \"items\", dsDpList,
                 \"periode\",   \"text\",  iPeriode );

  tStart = sStart;
  tStop  = sStop;
  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStop -= 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStop += 3600;

  tStart = tStart - iPeriode;
  tStop  = tStop  - iPeriode;

  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStart -= 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStart += 3600;

  lwGetValue( sDpt,
              sDp,
              sComment,
              tStart,
              tStop,
              dsDpList );
}
" 0
 E E E
13 92
"periodPlus"
""
1 3528 2368 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
2 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 338 686 366

T 
4
LANG:10001 8 Period +
LANG:10004 7 期间+
LANG:10000 9 Periode +
LANG:10027 14 Период +
"main()
{
  bool       bChange;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;

  string     sDpt;
  string     sDp;
  string     sComment;
  string     sStart;
  string     sStop;
  dyn_string dsDpList;
  int        iPeriode;
  time       tStart;
  time       tStop;


  // Check if values changed
  lwCheckTableChanges( bChange );
  if( bChange )
  {
    ChildPanelOnCentralModalReturn( \"vision/MessageInfo\",
                                    getCatStr( \"general\", \"information\" ),
                                    makeDynString( getCatStr( \"ac\", \"changesReject\" ),
                                                   getCatStr( \"general\", \"OK\" ),
                                                   getCatStr( \"general\", \"cancel\" )),
                                    dfAnswer, dsAnswer );
    if( dfAnswer[1] == 0 )
      return;
  }


  getMultiValue( \"dpt\",       \"text\",  sDpt,
                 \"dp\",        \"text\",  sDp,
                 \"comment\",   \"text\",  sComment,
                 \"startSave\", \"text\",  sStart,
                 \"stopSave\",  \"text\",  sStop,
                 \"dpList\",    \"items\", dsDpList,
                 \"periode\",   \"text\",  iPeriode );

  tStart = sStart;
  tStop  = sStop;
  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStart += 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStart -= 3600;

  tStart = tStart + iPeriode;
  tStop  = tStop  + iPeriode;

  if ( daylightsaving(tStart) && !daylightsaving(tStop) )
    tStop += 3600;
  else
  if ( !daylightsaving(tStart) && daylightsaving(tStop) )
    tStop -= 3600;

  lwGetValue( sDpt,
              sDp,
              sComment,
              tStart,
              tStop,
              dsDpList );
}
" 0
 E E E
13 81
"close"
""
1 2398 1803 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
1 0 0 0 0 0
E E E
0
4
LANG:10001 26 Close panel without action
LANG:10004 12 关闭面板
LANG:10000 46 Panel schließen, ohne eine Aktion auszulösen
LANG:10027 52 Закрыть без выполн. операции

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  588 543 686 571

T 
4
LANG:10001 5 Close
LANG:10004 6 关闭
LANG:10000 10 Schließen
LANG:10027 14 Закрыть
"main()
{
  cmdClose();
}" 0
 E E E
25 79
"table"
""
1 8 168 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
25 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  8 168 582 487
E"main(int x, string sCol, string sValue)
{
  int        x1, y, iValue;
  time       tValue;
  float      fValue;
  unsigned   uValue;
  string     sInvalid, sDp;
  bool       bInvalid, bValue;
  char       cValue;
  dyn_float  dfAnswer;
  dyn_string dsAnswer;

  if( getUserPermission( 2 ))
  {
    getValue( \"table\", \"currentCell\", x1, y,
                       \"cellValueRC\", x, \"invalid\", sInvalid,
                       \"cellValueRC\", x, \"dp\", sDp/*,
                       \"cellValueRC\", x, \"value\", sValue*/
            );


    // strlen statement added
    // Ensures that the ?Value is not zero when sValue is empty
    if ( (y != 4) || (strlen(sValue) == 0) ) return;

    if( dpElementType( sDp ) == BOOL_VAR )
    {
      bValue = sValue;
      setValue( \"table\", \"cellValueRC\", x, \"value\", bValue);
    }

    // Check char
    if( dpElementType( sDp ) == CHAR_VAR )
    {
      cValue = sValue;
      setValue( \"table\", \"cellValueRC\", x, \"value\", cValue);
    }

    // Check int
    if( dpElementType( sDp ) == INT_VAR )
    {
      iValue = sValue;
      setValue( \"table\", \"cellValueRC\", x, \"value\", iValue);
    }

    // Check unsigned
    if( dpElementType( sDp ) == UINT_VAR )
    {
      uValue = sValue;
      setValue( \"table\", \"cellValueRC\", x, \"value\", uValue);
    }

    // Check float
    if( dpElementType( sDp ) == DPEL_FLOAT )
    {
      int i;
      string ss;

      i = strpos(sValue,\".\");            // search the first point in the string
      if (i > (-1))                      // if there is a point in the string
                                         // --> cut off all characters after the point
        ss = substr(sValue,i+1);
      fValue = sValue;                   // cast the string into a float var.
      sprintf(sValue,\"%0.\"+strlen(ss)+\"f\",fValue); // from float to string
      setValue( \"table\", \"cellValueRC\", x, \"value\", sValue);
    }

    // Check time
    if( dpElementType( sDp ) == TIME_VAR )
    {
      tValue = sValue;
      setValue( \"table\", \"cellValueRC\", x, \"value\", tValue);
    }

    // Check DP
    if( dpElementType( sDp ) == DPIDENTIFIER_VAR )
    {
      if( !dpExists( sValue ))
        setValue( \"table\", \"cellValueRC\", x, \"value\", \"\");
    }



/* NOT ACTIVE UNTIL IT IS POSSIBLE TO SET INVALID EXPLICIT
    if( y == 7 )  // Column invalid
    {
      bInvalid = sInvalid;
      bInvalid = !bInvalid;
      setValue( \"table\", \"cellValueRC\", x, \"invalid\", bInvalid );
    }
*/
  }
}
" 0
 1 0 1 10 11 "time" 0 0 0 "s" 4
LANG:10001 4 Time
LANG:10004 6 时间
LANG:10000 9 Zeitpunkt
LANG:10027 10 Время
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

6 "showTime" 14 1 0 "s" 4
LANG:10001 4 Time
LANG:10004 6 时间
LANG:10000 9 Zeitpunkt
LANG:10027 10 Время
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

167 "dp" 0 0 0 "s" 4
LANG:10001 9 Datapoint
LANG:10004 11 数据点DP
LANG:10000 10 Datenpunkt
LANG:10027 23 Точка данных
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2 "description" 17 1 0 "s" 4
LANG:10001 21 DP name / Description
LANG:10004 15 DP名称/描述
LANG:10000 22 DP-Name / Beschreibung
LANG:10027 28 Имя DP / Описание
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

201 "value" 6 1 1 "s" 4
LANG:10001 5 Value
LANG:10004 6 数值
LANG:10000 4 Wert
LANG:10027 16 Значение
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

75 "valueSave" 5 0 0 "s" 4
LANG:10001 5 Value
LANG:10004 6 数值
LANG:10000 4 Wert
LANG:10027 16 Значение
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

70 "unit" 3 1 0 "s" 4
LANG:10001 4 Unit
LANG:10004 6 单位
LANG:10000 7 Einheit
LANG:10027 12 Ед.изм.
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

48 "invalid" 4 1 0 "s" 4
LANG:10001 6 Status
LANG:10004 6 状态
LANG:10000 6 Status
LANG:10027 9 Сост.
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

60 "invalidSave" 4 0 0 "s" 4
LANG:10001 6 Status
LANG:10004 6 状态
LANG:10000 6 Status
LANG:10027 9 Сост.
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

60 "user" 8 1 0 "s" 4
LANG:10001 4 User
LANG:10004 6 用户
LANG:10000 8 Benutzer
LANG:10027 24 Пользователь
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

100 
26 26 "" 1 4
LANG:10001 3 #11
LANG:10004 3 #11
LANG:10000 3 #11
LANG:10027 3 #11
"" 1 4
LANG:10001 3 #10
LANG:10004 3 #10
LANG:10000 3 #10
LANG:10027 3 #10
"" 1 4
LANG:10001 2 #9
LANG:10004 2 #9
LANG:10000 2 #9
LANG:10027 2 #9
"" 1 4
LANG:10001 2 #8
LANG:10004 2 #8
LANG:10000 2 #8
LANG:10027 2 #8
"" 1 4
LANG:10001 2 #7
LANG:10004 2 #7
LANG:10000 2 #7
LANG:10027 2 #7
"" 1 4
LANG:10001 2 #6
LANG:10004 2 #6
LANG:10000 2 #6
LANG:10027 2 #6
"" 1 4
LANG:10001 2 #5
LANG:10004 2 #5
LANG:10000 2 #5
LANG:10027 2 #5
"" 1 4
LANG:10001 2 #4
LANG:10004 2 #4
LANG:10000 2 #4
LANG:10027 2 #4
"" 1 4
LANG:10001 2 #3
LANG:10004 2 #3
LANG:10000 2 #3
LANG:10027 2 #3
"" 1 4
LANG:10001 2 #2
LANG:10004 2 #2
LANG:10000 2 #2
LANG:10027 2 #2
"" 1 4
LANG:10001 2 #1
LANG:10004 2 #1
LANG:10000 2 #1
LANG:10027 2 #1
8 10
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 0 2 1 1 7
1 0
14 104
"stopSave"
""
1 730 1872 E E E 1 E 0 E N "_WindowText" E N {255,255,0} E E
 E E
32 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  218 500 272 527
3 "0s" 0 0 0 0 0 -1  E E E
17 106
"dpList"
""
1 360 910 E E E 1 E 0 E N "_WindowText" E N {255,255,0} E E
 E E
33 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  268 498 332 522
0

E
E
E

0 0
14 107
"periode"
""
1 1000 2422 E E E 1 E 0 E N "_WindowText" E N {255,255,0} E E
 E E
35 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  328 500 382 527
3 "0s" 0 0 0 0 0 -1  E E E
14 109
"dptFilter"
""
1 1740 3522 E E E 1 E 0 E N "_WindowText" E N {255,255,0} E E
 E E
34 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  378 500 432 527
3 "0s" 0 0 0 0 0 -1  E E E
14 111
"lines"
""
1 1831.818181818182 1967 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
37 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  533 497 582 523
2 "0s" 0 0 0 2 0 -1  E E E
14 103
"startSave"
""
1 280 1602 E E E 1 E 0 E N "_WindowText" E N {255,255,0} E E
 E E
31 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  168 500 222 527
3 "0s" 0 0 0 0 0 -1  E E E
1 118 0 "" 0
0
30 114
"text4"
""
1 15 2 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
38 0 0 0 0 0
E E E
1
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 0 1 0 1 E 1.024242424242425 0 0.967741935483871 -5.363636363636374 4.064516129032256 0 E 15 2 676 96
4
LANG:10001 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,75,0,0,0,0,0
0 4
LANG:10001 27 Selected datapoint / Filter
LANG:10004 18 选择DP/过滤器
LANG:10000 33 Ausgewählter Datenpunkt / Filter
LANG:10027 36 Выбранная DP / Фильтр
10 28
"Polyline2"
""
1 10 565 E E E 1 E 1 E N "_ButtonShadow" E N "_Transparent" E E
 E E
15 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 2 1 0 1 E 0.9870967741935485 0 0.8461538461538463 0.1290322580645156 42.42307692307682 0 E 3 10 565
10 539
165 539
 0
30 117
"text3"
""
1 10 122 E E E 1 E 1 E N "_WindowText" E N {0,0,0} E E
 E E
39 0 0 0 0 0
E E E
1
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 0 1 0 1 E 1.001481481481481 0 1.666666666666667 -0.01481481481481417 -102.3333333333333 0 E 10 122 686 156
4
LANG:10001 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,75,0,0,0,0,0
0 4
LANG:10001 10 Time range
LANG:10004 12 时间范围
LANG:10000 11 Zeitbereich
LANG:10027 35 Временной интервал
0
LAYER, 1 
4
LANG:10001 6 Layer2
LANG:10004 6 Layer2
LANG:10000 6 Layer2
LANG:10027 6 Layer2
0
LAYER, 2 
4
LANG:10001 6 Layer3
LANG:10004 6 Layer3
LANG:10000 6 Layer3
LANG:10027 6 Layer3
0
LAYER, 3 
4
LANG:10001 6 Layer4
LANG:10004 6 Layer4
LANG:10000 6 Layer4
LANG:10027 6 Layer4
0
LAYER, 4 
4
LANG:10001 6 Layer5
LANG:10004 6 Layer5
LANG:10000 6 Layer5
LANG:10027 6 Layer5
0
LAYER, 5 
4
LANG:10001 6 Layer6
LANG:10004 6 Layer6
LANG:10000 6 Layer6
LANG:10027 6 Layer6
0
LAYER, 6 
4
LANG:10001 6 Layer7
LANG:10004 6 Layer7
LANG:10000 6 Layer7
LANG:10027 6 Layer7
0
LAYER, 7 
4
LANG:10001 6 Layer8
LANG:10004 6 Layer8
LANG:10000 6 Layer8
LANG:10027 6 Layer8
0
3 0 "PANEL_REF0" -1
"layoutAlignment" "AlignCenter"
"" ""
"objects_parts/STD_OBJECTS/ButtonBarBackground.pnl" 10 545 T 38 1.442885771543086 0 1 -19.42885771543086 -10
0
0
