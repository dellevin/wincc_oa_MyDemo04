V 14
4
LANG:10001 17 Select trend view
LANG:10004 18 选择趋势视图
LANG:10000 28 Auswahl der Trenddarstellung
LANG:10027 48 Выбор конфигурации тренда
PANEL,-1 -1 625 505 N "_3DFace" 1
"$DP"
E E E E E 1 -1 -1 0  240 102
""0  1
E "#uses \"distsync.ctl\"
#uses \"classes/CommandInterface\"

string gsUser;
string gsTrendName;

bool hasPermissionToModifyOrDeleteConfig(string userName)
{
  return getUserName() == userName || getUserName() == \"root\";
}" 0
 3
"CBRef" "0"
"EClose" E
"dpi" "96"
0 0 0
""
NC
DISPLAY_LAYER, 1 0 1 0 0 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
4
LANG:10001 6 Layer1
LANG:10004 6 Layer1
LANG:10000 6 Layer1
LANG:10027 6 Layer1
1 305 9 "" 0
0
1 303 1 "" 0
0
2 109
"Text1"
""
1 7.999999999999993 424.1585127201564 E E E 1 E 0 E N {255,0,0} E N "_Transparent" E E
 E E
19 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 9.999999999999993 426.1585127201564 166 452.1585127201564
0 2 0 "0s" 0 0 0 64 0 0  9.999999999999993 426.1585127201564 1
4
LANG:10001 26 Arial,-1,17,5,69,0,0,0,0,0
LANG:10004 26 Arial,-1,17,5,69,0,0,0,0,0
LANG:10000 26 Arial,-1,17,5,69,0,0,0,0,0
LANG:10027 26 Arial,-1,17,5,69,0,0,0,0,0
0 4
LANG:10001 16 LAYER 2 & 3 !!!!
LANG:10004 16 LAYER 2 & 3 !!!!
LANG:10000 15 LAYER 2 & 3 !!!
LANG:10027 15 LAYER 2 & 3 !!!
13 119
"Button9"
""
1 401 911.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
42 0 0 0 0 0
E E E
0
4
LANG:10001 16 Open online help
LANG:10004 18 打开在线帮助
LANG:10000 20 Online Hilfe öffnen
LANG:10027 14 Справка

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  13 469 101 497

T 
4
LANG:10001 4 Help
LANG:10004 6 帮助
LANG:10000 5 Hilfe
LANG:10027 14 Справка
"main()
{ string panel = \"VT_assistent\";

  std_help(panel);
}" 0
 E E E
13 49
"Button2"
""
1 511 471.1585127201564 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
41 0 0 0 0 0
E E E
0
4
LANG:10001 31 Discard changes and close panel
LANG:10004 30 放弃修改的数值并关闭
LANG:10000 42 Änderungen verwerfen und Panel schließen
LANG:10027 66 Отменить изменения и закрыть панель

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  523 469 611 497

T 
4
LANG:10001 6 Cancel
LANG:10004 6 取消
LANG:10000 9 Abbrechen
LANG:10027 16 Отменить
"main()
{
 PanelOff();
}" 0
 E E E
1 349 15 "" 0
0
1 307 14 "" 43
0
0
LAYER, 1 
4
LANG:10001 6 Layer2
LANG:10004 6 Layer2
LANG:10000 6 Layer2
LANG:10027 6 Layer2
25 115
"trendSelect"
""
1 170 38.15851272015635 E E E 1 E 0 E N "_WindowText" E N "_Window" E E
 E E
2 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,11,5,50,0,0,0,0,0
0  177 44 588 299
"bool bGeneralFault;
bool firstCall;
string sSelectedDP;
main()
{

firstCall = TRUE;

setValue(\"\",\"selectByClick\",TABLE_SELECT_LINE ,
  \"selectColors\",\"[0,0,0]\",\"[100,100,100]\",
  \"tableMode\", TABLE_SELECT_BROWSE,
  \"sortOnClick\",TRUE,
  \"sort\",\"name\");


 bGeneralFault = FALSE;
 startQuery();

}

void startQuery()
{
  int error;
  dyn_errClass err;
  
  if(firstCall)
  {
    gsUser=getUserName();
    //sUser=\"*\"; //Test  
  }       
  
  error = dpQueryConnectSingle(\"queryCB\", 1,\"ident\", \"SELECT 'TrendType:_online.._value, TrendName:_online.._value, User:_online.._value, DP:_online.._value' FROM '*' WHERE _DPT=\\\"_VarTrend\\\" AND 'User:_online.._value' == \\\"\"+gsUser+\"\\\"\"); //WHERE _DPT=\\\"_ValueArchive\\\"   
  if (error == -1)
        {  
           err = getLastError();                          // ungeplanter Fehler!!!!
      throwError(err);
    }
  
  // init columns for distsync
  if (distsync_isConfigured())
  {
    this.columnWidth(2, 201);
    this.columnWidth(5, 50);  
  }
}

queryCB(string ident,  dyn_dyn_anytype val) 
{ 
   int i, dummy; 
   dyn_errClass err = getLastError();
   bool bIsDollarCurve;
   bool isLocal;
   string yes = getCatStr(\"para\",\"yes\"), no = getCatStr(\"para\",\"no\"), s, TrendGroupName;
   int row, column, element;
   dyn_int diSelectedLines;
   string sTemp;
   int iSelectedLine;


  // TI 10992
  int pos;
  time t1, t2;
  dyn_time dt1, dt2;
  bool state;

   diSelectedLines = this.getSelectedLines;
   if(dynlen(diSelectedLines) > 0)
     row = diSelectedLines[1];

//DebugN(\"QUERYCB:\"+val);

 
   if ( dynlen(err) )
   {
      if (!bGeneralFault)
         {
         bGeneralFault = TRUE;                    // Fehlervermeindung !!
         startQuery();
         }
      else                
        {                              // ungeplanter Fehler!!!!
      throwError(err);
    }
      return;
   }
   else
   {
   
   
   //   DebugN(val);
   
   
      if (bGeneralFault)
      {
         this.backCol=\"\";                      // OO Programmierung
         bGeneralFault = FALSE;                    // Kein Fehler
      }
      for (i = 2; i <= dynlen( val ); i++ ) 
     {

        s=val[i][5];
        bIsDollarCurve = (strpos(s,\"$\")>-1);   // feststellen ob $ im DP vorkommt
        isLocal = (int)(substr(dpSubStr(val[i][1],DPSUB_DP),10,4))>=DISTSYNC_LOCAL_DP_START;
        TrendGroupName = val[i][3];
 
        this.updateLine(1,\"dp\",val[i][1],\"dp\",val[i][1],\"type\",val[i][2],\"name\",TrendGroupName,\"user\",val[i][4], \"dollar\", (bIsDollarCurve ?yes :no),\"local\",(isLocal?yes:no));  // Zeilenupdate
     }
    this.sort(dummy);
     if (row > 0) 
      trendSelect.selectLineN(row);
   
     this.visible = TRUE;
  }
  
 
// setTrace(2);
 
   if (firstCall && isDollarDefined(\"$DP\"))
  {
    for (i = 0; i < this.lineCount ; i++ ) 
    {
       sTemp = this.cellValueRC(i,\"name\");   // multilanguage
       
//       DebugN(\"***\", i, $DP, sTemp);

      if (strpos(sTemp,$DP)>=0)  
      {
        trendSelect.selectLineN = (i);
        element = this.cellValueRC(i,\"type\");
        sSelectedDP =this.cellValueRC(i,\"dp\"); 

        trendStyle.selectedPos = element;


         dpGet(sSelectedDP+\".StartTime:_original.._value\",dt1,
                sSelectedDP+\".EndTime:_original.._value\",dt2);
          
          if (dynlen(dt1)<9){ dt1[9] = 0;   dpSet( sSelectedDP+\".StartTime:_original.._value\",dt1);}
          if (dynlen(dt2)<9) { dt2[9] = 0;  dpSet( sSelectedDP+\".EndTime:_original.._value\",dt2);}


      	initTimeFields(sSelectedDP);// fneun 130701 neu zur Bugbehebung im Rahmen der Erstellung Vergleichstrend
                    // Der Bug bestand darin, daß beim Aufruf dieses Panels aus dem VT_Trend über \"Eigenschaften\" stets die
                    // Zeitpunkte verloren gingen, da beim Anzeigen des VT_Trend über \"Anzeigen\" die Zeiten aus den Panelelementen
                    // ermittelt werden.
                    // Ist nicht so schön gelöst, da die gleichen Funktionen auch hardcodiert hiter der \"Weiter>\" Taste stehen.
                    // Sollte man noch mal kapseln, vielleicht bei Übernahme in die Version.

  
          // new for setting values at starttime
            
          iSelectedLine = i;
                  
          pos =  trendStyle.selectedPos  ;
           
          if (dynlen(dt1)>0)  t1= dt1[1];
          if (dynlen(dt2)>0)  t2= dt2[1];
          
          calcTimeFromState(pos, t1, t2, state);
          if (pos != state)    // Zeit ist falsch ?
            if (pos == 6)    // any Time
              t2 = t2+1;    // eine Sekunde dazu
           setTimeRange(t1, t2, state);
      }
    }
    firstCall = FALSE;
  }
}

//------------------------------

void initTimeFields(string DP) //Eigentlich doppelt, da die gleichen Funktionalitäten auf der \"Weiter>\" Taste sind.
{
  int pos;
  time t1, t2;
  time tComp, tOffset;  // fneun 130701 neu für Vergleichstrend
  dyn_time dt1, dt2;
  bool state;
  bool bOffAv;      // fneun 130701 neu für Vergleichstrend
    
    dpGet(DP+\".StartTime:_original.._value\",dt1,
          DP+\".EndTime:_original.._value\",dt2);
            
    if (dynlen(dt1)>0)
    {
      t1    = dt1[1];
      tComp = dt1[9];
    }
    if (dynlen(dt2)>0)
    {
      t2      = dt2[1];
      tOffset = dt2[9];
    }
    
    calcTimeFromState(pos, t1, t2, state);

    if (pos != state)    // Zeit ist falsch ?
      if (pos == 6)    // any Time
        t2 = t2+1;    // eine Sekunde dazu
     setTimeRange(t1, t2, state);

  // fneun 130701 neu für Vergleichstrend ---
    setMultiValue(\"tic_year\",   \"text\", year(tComp),
                  \"tic_month\",  \"text\", month(tComp),
                  \"tic_day\",    \"text\", day(tComp),
                  \"tic_hour\",   \"text\", hour(tComp),
                  \"tic_minute\", \"text\", minute(tComp),
                  \"tic_second\", \"text\", second(tComp));
    bOffAv=(period(tOffset)!=0);  // Es ist ein Offset vorhanden
    setMultiValue(\"tic_year\",\"enabled\", bOffAv,
                  \"tic_month\",\"enabled\", bOffAv,
                  \"tic_day\",\"enabled\", bOffAv,
                  \"tic_hour\",\"enabled\", bOffAv,
                  \"tic_minute\",\"enabled\", bOffAv,
                  \"tic_second\",\"enabled\", bOffAv,
                  \"btTakeBegin\",\"enabled\", bOffAv,
                  \"chkCompActive\", \"state\", 0, bOffAv); 
  // ---
} 

" 0
"main()
{
dyn_int rows;
int element;



rows = this.getSelectedLines;

if (dynlen(rows) == 1)										// Spalte Typ holen
  element = this.cellValueRC(rows[1],\"type\");
  
 
if (element > 0)											// setzten
  {
  trendStyle.selectedPos = element;
  }
else 
  {
	trendStyle.text = \"\";
	trendStyle.selectedPos = 0;
	}
update();

}




update()
{
  int pos;
  time t1, t2;
  time tComp, tOffset;	// fneun 130701 neu für Vergleichstrend
  dyn_time dt1, dt2;
  dyn_int diSelectedLines;
  bool state;
  bool bOffAv;			// fneun 130701 neu für Vergleichstrend
  string DP;
  bool bthirdPage = TRUE;
  
  pos = trendStyle.selectedPos  ;
  ti_type.enabled	= FALSE;

  getValue(\"trendSelect\",\"getSelectedLines\",diSelectedLines);
  

  
if (dynlen(diSelectedLines)>0)
  {
    getValue(\"trendSelect\",\"cellValueRC\",diSelectedLines[1],\"dp\",DP);
    
    dpGet(DP+\".StartTime:_original.._value\",dt1,
          DP+\".EndTime:_original.._value\",dt2);
 
    if (dynlen(dt1)<9) { dt1[9] = 0;  dpSet( DP+\".StartTime:_original.._value\",dt1);}
    if (dynlen(dt2)<9) { dt2[9] = 0;  dpSet( DP+\".EndTime:_original.._value\",dt2);}
 
 
            
    selectedLine.text =   diSelectedLines[1];          
    pos =  trendStyle.selectedPos	;
     
	// fneun 130701 neu für Vergleichstrend ---
	// Original:
	//    if (dynlen(dt1)>0)  t1= dt1[1];
	//    if (dynlen(dt2)>0)  t2= dt2[1];
    if (dynlen(dt1)>0)
    {
      t1    = dt1[1];
      tComp = dt1[9];
    }
    if (dynlen(dt2)>0)
    {
      t2      = dt2[1];
      tOffset = dt2[9];
    }
	// ---    
    
    calcTimeFromState(pos, t1, t2, state);

    if (pos != state)		// Zeit ist falsch ?
    	if (pos == 6)		// any Time
    		t2 = t2+1;		// eine Sekunde dazu
   	setTimeRange(t1, t2, state);

	// fneun 130701 neu für Vergleichstrend ---
    setMultiValue(\"tic_year\",   \"text\", year(tComp),
                  \"tic_month\",  \"text\", month(tComp),
                  \"tic_day\",    \"text\", day(tComp),
                  \"tic_hour\",   \"text\", hour(tComp),
                  \"tic_minute\", \"text\", minute(tComp),
                  \"tic_second\", \"text\", second(tComp));
    bOffAv=(period(tOffset)!=0);  // Es ist ein Offset vorhanden
    setMultiValue(\"tic_year\",\"enabled\", bOffAv,
                  \"tic_month\",\"enabled\", bOffAv,
                  \"tic_day\",\"enabled\", bOffAv,
                  \"tic_hour\",\"enabled\", bOffAv,
                  \"tic_minute\",\"enabled\", bOffAv,
                  \"tic_second\",\"enabled\", bOffAv,
                  \"btTakeBegin\",\"enabled\", bOffAv,
                  \"chkCompActive\", \"state\", 0, bOffAv, 
                  \"SPIN_BUTTON1\",\"visible\", FALSE,
                  \"PRIMITIVE_TEXT1\",\"visible\",FALSE ); 
	// ---
  if(pos ==9)
  {
    setValue(\"SPIN_BUTTON1\",\"visible\",TRUE,
                            \"text\",60);
    setValue(\"PRIMITIVE_TEXT1\",\"visible\",TRUE);
  }
  
  }
}




//Function Button4_EventClick()


" 0
 1 0 1 6 13 "type" 21 0 0 "s" 4
LANG:10001 4 type
LANG:10004 4 type
LANG:10000 4 type
LANG:10027 6 Тип
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

240 "dp" 21 0 0 "s" 4
LANG:10001 2 dp
LANG:10004 2 dp
LANG:10000 2 dp
LANG:10027 2 dp
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

240 "name" 22 1 0 "s" 4
LANG:10001 19 Trend configuration
LANG:10004 12 趋势配置
LANG:10000 18 Trendkonfiguration
LANG:10027 37 Конфигурация тренда
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

251 "user" 6 1 0 "s" 4
LANG:10001 4 User
LANG:10004 6 用户
LANG:10000 8 Benutzer
LANG:10027 24 Пользователь
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

82 "dollar" 4 1 0 "s" 4
LANG:10001 7 $Curves
LANG:10004 7 $Curves
LANG:10000 7 $Kurven
LANG:10027 13 $-парам.
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

59 "local" 1 1 0 "s" 4
LANG:10001 7 Private
LANG:10004 9 私有的
LANG:10000 6 Privat
LANG:10027 14 Частный
E
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

20 
18 18 "" 1 4
LANG:10001 2 #1
LANG:10004 2 #1
LANG:10000 2 #1
LANG:10027 2 #1
"" 1 4
LANG:10001 2 #2
LANG:10004 2 #2
LANG:10000 2 #2
LANG:10027 2 #2
"" 1 4
LANG:10001 2 #3
LANG:10004 2 #3
LANG:10000 2 #3
LANG:10027 2 #3
"" 1 4
LANG:10001 2 #4
LANG:10004 2 #4
LANG:10000 2 #4
LANG:10027 2 #4
"" 1 4
LANG:10001 2 #5
LANG:10004 2 #5
LANG:10000 2 #5
LANG:10027 2 #5
"" 1 4
LANG:10001 2 #6
LANG:10004 2 #6
LANG:10000 2 #6
LANG:10027 2 #6
"" 1 4
LANG:10001 2 #7
LANG:10004 2 #7
LANG:10000 2 #7
LANG:10027 2 #7
"" 1 4
LANG:10001 2 #8
LANG:10004 2 #8
LANG:10000 2 #8
LANG:10027 2 #8
"" 1 4
LANG:10001 2 #9
LANG:10004 2 #9
LANG:10000 2 #9
LANG:10027 2 #9
"" 1 4
LANG:10001 3 #10
LANG:10004 3 #10
LANG:10000 3 #10
LANG:10027 3 #10
"" 1 4
LANG:10001 3 #11
LANG:10004 3 #11
LANG:10000 3 #11
LANG:10027 3 #11
"" 1 4
LANG:10001 3 #12
LANG:10004 3 #12
LANG:10000 3 #12
LANG:10027 3 #12
"" 1 4
LANG:10001 3 #13
LANG:10004 3 #13
LANG:10000 3 #13
LANG:10027 3 #13
8 30
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,11,5,50,0,0,0,0,0
0 0 2 0 1 7
1 0
2 111
"Text2"
""
1 194 46.15851272015635 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
20 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 182 28.15851272015635 421 43
0 2 0 "0s" 0 0 0 192 0 0  182 28.15851272015635 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 41 Select trend configuration and time range
LANG:10004 33 选择趋势配置和时间范围
LANG:10000 64 Wählen Sie eine Trendkonfiguration und eine Darstellungsart aus
LANG:10027 81 Выберите конфигурацию и временной интервал 
2 112
"Text3"
""
1 203 740.1585127201563 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
21 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 179 395.1585127201564 249 410
0 2 0 "0s" 0 0 0 192 0 0  179 395.1585127201564 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 11 Time range:
LANG:10004 12 时间范围
LANG:10000 16 Darstellungsart:
LANG:10027 36 Временной интервал:
2 257
"Text4"
""
1 192 688.1585127201563 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
33 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 179 343.1585127201564 208 358
0 2 0 "0s" 0 0 0 192 0 0  179 343.1585127201564 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 4 User
LANG:10004 6 用户
LANG:10000 8 Benutzer
LANG:10027 24 Пользователь
2 299
"Text5"
""
1 364 688.1585127201563 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
35 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 330 343.1585127201564 476 358
0 2 0 "0s" 0 0 0 192 0 0  330 343.1585127201564 1
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0 4
LANG:10001 27 Trend configurations filter
LANG:10004 18 趋势配置过滤
LANG:10000 26 Trendkonfigurations Filter
LANG:10027 50 Фильтр конфигураций тренда
13 116
"Button7"
""
1 890 916.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  448 304 536 332

T 
4
LANG:10001 4 Edit
LANG:10004 6 编辑
LANG:10000 9 Editieren
LANG:10027 16 Изменить
"main()
{
  dyn_int diSelectedLines;
  getValue(\"trendSelect\", \"getSelectedLines\", diSelectedLines);

  if (dynlen(diSelectedLines) != 1) // only when one line is selected
    return;

  string userName;
  getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"user\", userName);

  if (hasPermissionToModifyOrDeleteConfig(userName))
  {
    string dp;
    string local;
    string no = getCatStr(\"para\", \"no\");

    getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"dp\", dp);
    getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"local\", local);

    if (distsync_amIClientSystem() && local == no)
      distsync_ShowLocalMessage(DISTSYNC_TRENDCONFIGWARNING);

    ChildPanelOnCentralModal(
        \"vision/trend/VT_prop_curveselect.pnl\",
        getCatStr(\"ac\", \"headerEditPanels\"),
        makeDynString(\"$DP:\" + dp));
  }
  else
  {
    ChildPanelOnCentral(
        \"vision/MessageWarning\",
        getCatStr(\"va\", \"headerPanelhost\"),
        makeDynString(getCatStr(\"general\", \"permission\"), getCatStr(\"general\", \"cancel\")));
  }
}" 0
 E E E
13 114
"Button6"
""
1 587 606.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
5 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  358 304 446 332

T 
4
LANG:10001 6 Delete
LANG:10004 6 删除
LANG:10000 8 Löschen
LANG:10027 14 Удалить
"main()
{
  dyn_int diSelectedLines;
  getValue(\"trendSelect\", \"getSelectedLines\", diSelectedLines);

  if (dynlen(diSelectedLines) != 1) // only when one line is selected
    return;

  string userName;
  getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"user\", userName);

  if (hasPermissionToModifyOrDeleteConfig(userName))
  {
    string dp;
    string local;
    string no = getCatStr(\"para\", \"no\");

    getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"dp\", dp);
    getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"local\", local);

    if (distsync_amIClientSystem() && local == no)
      distsync_ShowLocalMessage(DISTSYNC_TRENDCONFIGWARNING);

    dyn_float dfReturn;
    dyn_string dsReturn;

    ChildPanelOnCentralModalReturn(
        \"vision/MessageInfo\",
        getCatStr(\"ac\", \"deleteHeader\"),
        makeDynString(getCatStr(\"ac\", \"deleteQuestion\"), getCatStr(\"general\", \"OK\"), getCatStr(\"va\", \"cancel\")),
        dsReturn,
        dfReturn);

    if (dsReturn[1] == \"1\") // OK
    {
      setValue(\"trendSelect\", \"deleteLineN\", diSelectedLines[1]);

      if (CommandInterface::commandDeleteVarTrendConfiguration(dp) != 0)
      {
        ChildPanelOnCentral(
            \"vision/MessageWarning\",
            getCatStr(\"va\", \"headerPanelhost\"),
            makeDynString(
                getCatStr(\"general\", \"permission\"),
                getCatStr(\"general\", \"cancel\")));
        return;
      }
    }
  }
  else
  {
    ChildPanelOnCentral(
        \"vision/MessageWarning\",
        getCatStr(\"va\", \"headerPanelhost\"),
        makeDynString(getCatStr(\"general\", \"permission\"), getCatStr(\"general\", \"cancel\")));
  }
}" 0
 E E E
13 113
"Button5"
""
1 393 606.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
4 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  268 304 356 332

T 
4
LANG:10001 3 New
LANG:10004 6 新建
LANG:10000 3 Neu
LANG:10027 14 Создать
"main()
{
  dyn_string ds, ds2;
  dyn_float dfReturn;
  dyn_string dsReturn;
  int i;
  string emptyDp, defaultDp = \"_VarTrend_\";
  string systemName;
  langString ls;
  string sNumber, tempDp;
  string s;
  string LineStyle = \"[solid,oneColor,JoinMiter,CapButt,1]\";
  string ColorStyle = \"[100,40,20]\";
  string CurveScale = \"AUTO:\";
  string FillStyle = \"1:1:1:\";
  string now = getCurrentTime();
  bool createLocal = false;

  if (distsync_isConfigured())
  {
    if (distsync_amIMasterSystem())
      createLocal = distsync_ShowLocalMessage(DISTSYNC_TRENDCONFIG_MASTER);
    else
      createLocal = distsync_ShowLocalMessage(DISTSYNC_TRENDCONFIG);
  }

  ds = dpNames(\"*\", \"_VarTrend\");                             // alle DP's holen

  if (dynlen(ds) > 0)
    systemName = dpSubStr(ds[1], DPSUB_SYS);                  // System feststellen
  else
  {
    systemName = getSystemName();
    emptyDp = defaultDp;                                      // falls nicht feststellbar -> kein DP definiert
    sNumber = \"0000\";                                         // Überspringe Suchroutine
  }

  i = (createLocal) ? DISTSYNC_LOCAL_DP_START : 0;

  while (defaultDp != emptyDp)
  {
    sprintf(sNumber, \"%04d\", i);
    tempDp = systemName + defaultDp + sNumber;

    if (dynContains(ds, tempDp) == 0)                         // leeren DP gefunden
      emptyDp = defaultDp;
    else                                                      // testen ob dieser DP als gelöscht markiert ist...
      i++;                                                    // ansonsten probier' den nächsten aus
  }

  // TempDp = erster freier ohne System !! Datenpunkt !!
  tempDp = defaultDp + sNumber;

  for (i = 1; i <= getNoOfLangs(); i++)                       // Defaultnamen generieren
    ds2[i] = substr(tempDp, 1, strlen(tempDp));               // _ des Datenpunktes entfernen

  s = ds2;
  strreplace(s, \" | \", \"°\");

  ChildPanelOnCentralModalReturn(
      \"para/archive/archive_input_lang.pnl\",
      getCatStr(\"ac\", \"newTrendClassHeader\"),
      makeDynString(
          getCatStr(\"ac\", \"newTrendClassQuestion2\"),
          \"%s\",
          dpSubStr(tempDp, DPSUB_DP),
          getCatStr(\"general\", \"OK\"),
          getCatStr(\"general\", \"cancel\"), \"$LANG:\" + s),
      dfReturn,
      dsReturn);

  for (int i = 1; i <= getNoOfLangs(); i++)
    dpNameCheck(dsReturn[i]);

  ls = dsReturn;

  if (dynlen(dsReturn) > 0)
  {
    if (dsReturn[1] != \"FALSE\")
    {
      if (CommandInterface::commandCreateVarTrendConfiguration(tempDp, getSystemId(systemName)) != 0)
      {
        ChildPanelOnCentral(
            \"vision/MessageWarning\",
            getCatStr(\"va\", \"headerPanelhost\"),
            makeDynString(
                getCatStr(\"general\", \"permission\"),
                getCatStr(\"general\", \"cancel\")));
        return;
      }

      dpSetWait(
          systemName + tempDp + \".LineStyle:_original.._value\", makeDynString(LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle, LineStyle),
          systemName + tempDp + \".ColorStyle:_original.._value\", makeDynString(\"STD_trend_pen1\", \"STD_trend_pen2\", \"STD_trend_pen3\", \"STD_trend_pen4\", \"STD_trend_pen5\", \"STD_trend_pen6\", \"STD_trend_pen7\", \"STD_trend_pen8\", \"STD_trend_pen1\", \"STD_trend_pen2\", \"STD_trend_pen3\", \"STD_trend_pen4\", \"STD_trend_pen5\", \"STD_trend_pen6\", \"STD_trend_pen7\", \"STD_trend_pen8\"),
          systemName + tempDp + \".FillStyle:_original.._value\", makeDynString(FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle, FillStyle),
          systemName + tempDp + \".Scale:_original.._value\", makeDynString(1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
          systemName + tempDp + \".CurveScale:_original.._value\", makeDynString(CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale, CurveScale),
          systemName + tempDp + \".DP:_original.._value\", makeDynString(\"\"),
          systemName + tempDp + \".TrendType:_original.._value\", 1,
          systemName + tempDp + \".StartTime:_original.._value\", makeDynTime(now, now, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, now), // fneun 130701 now auf [9] hinzugefügt (Startzeit Vergleichstrend)
          systemName + tempDp + \".EndTime:_original.._value\", makeDynTime(now, now, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),     // fneun 130701 Null auf [9] hinzugefügt (Offset Vergleichstrend)
          systemName + tempDp + \".Compression:_original.._value\", makeDynBool(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

      dpSetWait(
          systemName + tempDp + \".TrendName:_original.._value\", ls,
          systemName + tempDp + \".User:_original.._value\", getUserName());
    }
  }
}" 0
 E E E
13 117
"Button8"
""
1 308 916.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
3 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  177 304 265 332

T 
4
LANG:10001 4 Copy
LANG:10004 6 复制
LANG:10000 8 Kopieren
LANG:10027 20 Копировать
"main()
{
  dyn_string DP, Compression, ColorStyle, LineStyle, CurveStyle, FillStyle, CurveScale;
  dyn_time StartTime, EndTime;
  dyn_bool Scale;

  dyn_string ds, ds2;
  dyn_float dfReturn;
  dyn_string dsReturn;
  int i;
  string emptyDp, defaultDp = \"_VarTrend_\";
  string systemName;
  langString ls;
  string sNumber, tempDp;
  string s, dp;
  dyn_int diSelectedLines;
  bool createLocal = false;

  getValue(\"trendSelect\", \"getSelectedLines\", diSelectedLines);

  if (dynlen(diSelectedLines) > 0)                              // Nur wenn ein Wert selektiert ist
  {
    if (distsync_isConfigured())
      createLocal = distsync_ShowLocalMessage(DISTSYNC_TRENDCONFIG);

    getValue(\"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"dp\", dp);

    ds = dpNames(\"*\", \"_VarTrend\");                             // alle DP's holen

    if (dynlen(ds) > 0)
      systemName = dpSubStr(ds[1], DPSUB_SYS);                  // System feststellen
    else
      emptyDp = defaultDp;                                      // falls nicht feststellbar -> kein DP definiert
                                                                // Überspringe Suchroutine

    i = (createLocal) ? DISTSYNC_LOCAL_DP_START : 0;

    while (defaultDp != emptyDp)
    {
      sprintf(sNumber, \"%04d\", i);
      tempDp = systemName + defaultDp + sNumber;

      if (dynContains(ds, tempDp) == 0)                         // leeren DP gefunden
        emptyDp = defaultDp;
      else                                                      // testen ob dieser DP als gelöscht markiert ist...
        i++;                                                    // ansonsten probier' den nächsten aus
    }

    // TempDp = erster freier ohne System !! Datenpunkt !!
    tempDp = defaultDp + sNumber;

    for (i = 1; i <= getNoOfLangs(); i++)                       // Defaultnamen generieren
      ds2[i] = substr(tempDp, 1, strlen(tempDp));               // _ des Datenpunktes entfernen

    s = ds2;
    strreplace(s, \" | \", \"°\");

    ChildPanelOnCentralModalReturn(
        \"para/archive/archive_input_lang.pnl\",
        getCatStr(\"ac\", \"newTrendClassHeaderCopy\"),
        makeDynString(
            getCatStr(\"ac\", \"newTrendClassQuestion2\"),
            \"%s\",
            dpSubStr(tempDp, DPSUB_DP),
            getCatStr(\"general\", \"OK\"),
            getCatStr(\"general\", \"cancel\"),
            \"$LANG:\" + s),
        dfReturn,
        dsReturn);

    ls = dsReturn;

    if (dynlen(dsReturn) > 0)
    {
      if (dsReturn[1] != \"FALSE\")
      {
        if (CommandInterface::commandCreateVarTrendConfiguration(tempDp, getSystemId(systemName)) != 0)
        {
          ChildPanelOnCentral(
              \"vision/MessageWarning\",
              getCatStr(\"va\", \"headerPanelhost\"),
              makeDynString(
                  getCatStr(\"general\", \"permission\"),
                  getCatStr(\"general\", \"cancel\")));
        }

        dpGet(
            dp + \".DP:_online.._value\", DP,
            dp + \".Compression:_online.._value\", Compression,
            dp + \".ColorStyle:_online.._value\", ColorStyle,
            dp + \".LineStyle:_online.._value\", LineStyle,
            dp + \".FillStyle:_online.._value\", FillStyle,
            dp + \".StartTime:_online.._value\", StartTime,
            dp + \".EndTime:_online.._value\", EndTime,
            dp + \".CurveScale:_online.._value\", CurveScale,
            dp + \".Scale:_online.._value\", Scale);

        dpSet(
            systemName + tempDp + \".DP:_original.._value\", DP,
            systemName + tempDp + \".Compression:_original.._value\", Compression,
            systemName + tempDp + \".ColorStyle:_original.._value\", ColorStyle,
            systemName + tempDp + \".LineStyle:_original.._value\", LineStyle,
            systemName + tempDp + \".FillStyle:_original.._value\", FillStyle,
            systemName + tempDp + \".StartTime:_original.._value\", StartTime,
            systemName + tempDp + \".EndTime:_original.._value\", EndTime,
            systemName + tempDp + \".CurveScale:_original.._value\", CurveScale,
            systemName + tempDp + \".Scale:_original.._value\", Scale,
            systemName + tempDp + \".TrendName:_original.._value\", ls,
            systemName + tempDp + \".User:_original.._value\", getUserName());
      }
    }
  }
}" 0
 E E E
22 118
"trendStyle"
""
1 220 806.1585127201563 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
14 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  178 414 592 441
0

"main()
{
dyn_string ds;
string s = getCatStr(\"ac\",\"trendcurvenames\");
ds=strsplit(s,\"|\");

this.items=ds;
}" 0

E
E
 0 0
13 50
"Button3"
""
1 958 917.1585127201563 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
40 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  433 469 521 497

T 
4
LANG:10001 4 View
LANG:10004 6 视图
LANG:10000 8 Anzeigen
LANG:10027 15 На экран
"
main()
{
  time TimeRangeStart, TimeRangeEnd;
  time tComp, tOffset;	// fneun 130701 neu für Vergleichstrend
  bool bCompActive;		// fneun 130701 neu für Vergleichstrend
  dyn_dyn_anytype transfer;
  string transferstring, DP;
  dyn_int diSelectedLines;
  int type;
  string s;
  bool bIsDollarCurve;
  unsigned ui;

getValue(\"trendSelect\",\"getSelectedLines\",diSelectedLines);
  
//setTrace(2);  
  
if (dynlen(diSelectedLines)>0)
  if ( getUserPermission(1))        // Nur wenn ein Wert selektiert ist
  {
    int cYear, cMonth, cDay, cHour, cMinute, cSecond;

    getMultiValue(
      \"tic_year\", \"text\", cYear,
      \"tic_month\", \"text\", cMonth,
      \"tic_day\", \"text\", cDay,
      \"tic_hour\", \"text\", cHour,
      \"tic_minute\", \"text\", cMinute,
      \"tic_second\", \"text\", cSecond,
      \"trendSelect\", \"cellValueRC\", diSelectedLines[1], \"dp\", DP,
      \"chkCompActive\", \"state\", 0, bCompActive);
  
    getTimeRange(TimeRangeStart, TimeRangeEnd, type);
    // fneun 130701 neu für Vergleichstrend ---
    tComp=makeTime(cYear, cMonth, cDay, cHour, cMinute, cSecond);
    if (bCompActive)
      tOffset = TimeRangeStart - tComp;
    else
      tOffset = 0;  
	// ---



    if (TimeRangeStart > getCurrentTime())
         ChildPanelOnCentral(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"ac\",\"time>now\"),getCatStr(\"general\",\"cancel\")));
     
	else
	{
	    type = trendStyle.selectedPos;
	    
	    dpSet(DP+\".StartTime:_original.._value\",makeDynTime(TimeRangeStart,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,tComp),   // fneun 130701 tComp   hinzu neu für Vergleichstrend ---
	          DP+\".EndTime:_original.._value\",makeDynTime(TimeRangeEnd,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,tOffset),     // fneun 130701 tOffset hinzu neu für Vergleichstrend ---
	          DP+\".TrendType:_original.._value\", type);
	
	    dpGet(DP+\".DP:_online.._value\",transfer[3],
	          DP+\".Compression:_online.._value\",transfer[4],
	          DP+\".ColorStyle:_online.._value\",transfer[5],
	          DP+\".LineStyle:_online.._value\",transfer[6],
	          DP+\".FillStyle:_online.._value\",transfer[7],
	          DP+\".StartTime:_online.._value\",transfer[8],
	          DP+\".EndTime:_online.._value\",transfer[9],
	          DP+\".CurveScale:_online.._value\",transfer[10],
	          DP+\".Scale:_online.._value\",transfer[11],
	          DP+\".TrendType:_online.._value\",transfer[2][1]);
	    transfer[1] = makeDynString(DP);
		
	    s= transfer[3];              // Stringcasting
	        bIsDollarCurve = (strpos(s,\"$\")>-1);   // feststellen ob $ im DP vorkommt
	
	    if (bIsDollarCurve)
	    {
	     ChildPanelOnCentral(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"ac\",\"permissionDollar\"),getCatStr(\"general\",\"cancel\")));
	    }
	    else
	    {
	      mergeToString(transferstring, transfer);
	      dpSet(\"_VarTrendOpen.UiNumber:_original.._value\",myUiNumber(),
	          \"_VarTrendOpen.PanelName:_original.._value\", myModuleName(),
	           \"_VarTrendOpen.TrendData:_original.._value\",transferstring);
	       PanelOff();
	    }
  	}
  
  
  }
  else
  {
      ChildPanelOnCentral(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"general\",\"permission\"),getCatStr(\"general\",\"cancel\")));
  }
}














" 0
 E E E
13 51
"Button4"
""
1 1261 1364.158512720156 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
38 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  343 469 431 497

T 
4
LANG:10001 9 Forward >
LANG:10004 7 前进>
LANG:10000 8 Weiter >
LANG:10027 14 Вперед >
"main()
{
  int pos;
  time t1, t2;
  time tComp, tOffset;	// fneun 130701 neu für Vergleichstrend
  dyn_time dt1, dt2;
  dyn_int diSelectedLines;
  bool state;
  bool bOffAv;			// fneun 130701 neu für Vergleichstrend
  string DP;
  bool bthirdPage = TRUE;

  time tZeroTime=0;   // TI 11629
   
  pos = trendStyle.selectedPos  ;
  ti_type.enabled	= FALSE;

  getValue(\"trendSelect\",\"getSelectedLines\",diSelectedLines);
  

 	// fneun 130701 neu für Vergleichstrend ---

  setMultiValue(\"tic_year\",   \"visible\", !bthirdPage,
                \"tic_month\",  \"visible\", !bthirdPage,
                \"tic_day\",    \"visible\", !bthirdPage,
                \"tic_hour\",   \"visible\", !bthirdPage,
                \"tic_minute\", \"visible\", !bthirdPage,
                \"tic_second\", \"visible\", !bthirdPage,
                \"btTakeBegin\",\"visible\", !bthirdPage,
                \"chkCompActive\",\"visible\", !bthirdPage,
                \"Text23\",     \"visible\", !bthirdPage,
                \"Text14\",     \"visible\", bthirdPage,
        								\"tie_today\",  \"visible\", bthirdPage,
        								\"tie_year\",   \"visible\", bthirdPage,
        								\"tie_month\",  \"visible\", bthirdPage,
        								\"tie_day\",    \"visible\", bthirdPage,
        								\"tie_hour\",   \"visible\", bthirdPage,
        								\"tie_minute\", \"visible\", bthirdPage,
        								\"tie_second\", \"visible\", bthirdPage,
        								\"Button11\",   \"enabled\", bthirdPage, 
                \"SPIN_BUTTON1\",\"visible\", FALSE,
                \"PRIMITIVE_TEXT1\",\"visible\",FALSE ); 
 
if (dynlen(diSelectedLines)>0)
  {
    getValue(\"trendSelect\",\"cellValueRC\",diSelectedLines[1],\"dp\",DP);
    
    dpGet(DP+\".StartTime:_original.._value\",dt1,
          DP+\".EndTime:_original.._value\",dt2);
            
    selectedLine.text =   diSelectedLines[1];          
    pos =  trendStyle.selectedPos	;
     
	// fneun 130701 neu für Vergleichstrend ---
	// Original:
	//    if (dynlen(dt1)>0)  t1= dt1[1];
	//    if (dynlen(dt2)>0)  t2= dt2[1];
    if (dynlen(dt1)>0)
    {
      t1    = dt1[1];
      tComp = dt1[9];
    }
    if (dynlen(dt2)>0)
    {
      t2      = dt2[1];
      tOffset = dt2[9];
    }
	// ---    
    
    calcTimeFromState(pos, t1, t2, state);

    if (pos != state)		// Zeit ist falsch ?
    {
     	if (pos == 6)		// any Time
      		t2 = t2+1;		// eine Sekunde dazu
      if ( pos == 3)
      {
        t1 -= 2*86400;  // any day
        t2 -= 2*86400;
      }
    }
 
    // IM117993 - set the correct value for the spin button
    if(pos == 9)
    {
      time t_start, t_end;
      int i_tDiff;
        
      t_start = dt1[1];
      t_end = dt2[1];
      
      i_tDiff = (t_end - t_start);
      i_tDiff = i_tDiff/60;

      // set an initial value of 60 minutes if nothing is defined or if value does not match the range 1-180      
      if(i_tDiff == 0 || i_tDiff > 180)
        i_tDiff = 60;
      
      //DebugTN(__LINE__,\\\"next button\\\",t_start,t_end,i_tDiff);

      setValue(\"SPIN_BUTTON1\",\"visible\",TRUE,
                              \"text\",i_tDiff);
      setValue(\"PRIMITIVE_TEXT1\",\"visible\",TRUE);
    }
    		
   	setTimeRange(t1, t2, state);
   	


	// fneun 130701 neu für Vergleichstrend ---
    setMultiValue(\"tic_year\",   \"text\", year(tComp),
                  \"tic_month\",  \"text\", month(tComp),
                  \"tic_day\",    \"text\", day(tComp),
                  \"tic_hour\",   \"text\", hour(tComp),
                  \"tic_minute\", \"text\", minute(tComp),
                  \"tic_second\", \"text\", second(tComp));
    bOffAv=(tOffset!=tZeroTime);  // Es ist ein Offset vorhanden
    setMultiValue(\"tic_year\",\"enabled\", bOffAv,
                  \"tic_month\",\"enabled\", bOffAv,
                  \"tic_day\",\"enabled\", bOffAv,
                  \"tic_hour\",\"enabled\", bOffAv,
                  \"tic_minute\",\"enabled\", bOffAv,
                  \"tic_second\",\"enabled\", bOffAv,
                  \"btTakeBegin\",\"enabled\", bOffAv,
                  \"chkCompActive\", \"state\", 0, bOffAv); 
	// ---
  
    SwitchLayer(2, 3);
  }
}






" 0
 E E E
22 258
"cboUsers"
""
1 193 754.1585127201563 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
11 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  178 362 322 389
0

"main()
{
  
  dyn_string ds, dsUsers; 
  dyn_bool dbEnabled; 

  dpGet(\"_Users.UserName:_online.._value\",dsUsers); 
  dpGet(\"_Users.Enabled:_online.._value\",dbEnabled); 
   
  for (int i=1; i<=dynlen(dsUsers); i++) 
  { 
    if (dbEnabled[i]==true) dynAppend(ds,dsUsers[i]); 
  } 
   
  dynInsertAt(ds,\"*\",1); 
  dynInsertAt(ds,\"no_User\",2); 
  this.text     = getUserName(); 
  this.items=ds; 

}" 0

"main()
{

}" 0

E
 0 0
14 298
"txtFilter_01"
""
1 327 364.1585127201564 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
12 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  325 362 500 388
3 "0s" 0 0 0 0 0 -1  E E E
13 302
"Button14"
""
1 492 363.1585127201564 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
13 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  504 361 592 389

T 
4
LANG:10001 6 Filter
LANG:10004 9 过滤器
LANG:10000 7 Filtern
LANG:10027 20 Фильтрация
"main()

{
trendSelect.deleteAllLines();
startQuery();
}

void startQuery()
{
  int error;
  dyn_errClass err;
            
  
  error = dpQueryConnectSingle(\"queryCB\", 1,\"ident\", \"SELECT 'TrendType:_online.._value, TrendName:_online.._value, User:_online.._value, DP:_online.._value' FROM '*' WHERE _DPT=\\\"_VarTrend\\\"\"); //WHERE _DPT=\\\"_ValueArchive\\\"   
  if (error == -1)
  {  
    err = getLastError();                          // ungeplanter Fehler!!!!
    throwError(err);
  }
  
}

queryCB(string ident,  dyn_dyn_anytype val) 
{ 
   int i, dummy; 
   dyn_errClass err = getLastError();
   bool bIsDollarCurve;
   string yes = getCatStr(\"para\",\"yes\"), no = getCatStr(\"para\",\"no\"), s, TrendGroupName;
   int row, column, element;
   dyn_int diSelectedLines;
   string sTemp;
   string sKonfFilter=txtFilter_01.text;
   string sUserFilter=cboUsers.text;
   int iSelectedLine;


  // TI 10992
  int pos;
  time t1, t2;
  dyn_time dt1, dt2;
  bool state;
  bool isLocal;

  diSelectedLines = trendSelect.getSelectedLines;
  if(dynlen(diSelectedLines) > 0)
    row = diSelectedLines[1];

  //DebugN(\"QUERYCB:\"+val);
     
  for (i = 2; i <= dynlen( val ); i++ ) 
  {

    s=val[i][5];
    bIsDollarCurve = (strpos(s,\"$\")>-1);   // feststellen ob $ im DP vorkommt
    TrendGroupName = val[i][3];
    isLocal = (int)(substr(dpSubStr(val[i][1],DPSUB_DP),10,4))>=DISTSYNC_LOCAL_DP_START;
        
    if(sKonfFilter==\"\")
      sKonfFilter=\"*\";
    if(sUserFilter==\"no_User\")
    {
      sUserFilter=\"\";
    }
      
    if(patternMatch(sUserFilter,val[i][4]) && patternMatch(sKonfFilter,val[i][3]) && val[i][3]!=\"\")
      trendSelect.updateLine(1,\"dp\",val[i][1],\"dp\",val[i][1],\"type\",val[i][2],\"name\",TrendGroupName,\"user\",val[i][4], \"dollar\", (bIsDollarCurve ?yes :no ),\"local\",(isLocal?yes:no));  // Zeilenupdate
  }
  trendSelect.sort(\"name\");
  if (row > 0) 
    trendSelect.selectLineN(row);
   
  trendSelect.visible = TRUE;
  trendSelect.lineVisible (0);

}" 0
 E E E
0
LAYER, 2 
4
LANG:10001 6 Layer3
LANG:10004 6 Layer3
LANG:10000 6 Layer3
LANG:10027 6 Layer3
1 308 14 "" 4
0
2 239
"Text23"
""
1 216 248.1585127201564 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
32 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 216 248.1585127201564 331 263
0 2 2 "0s" 0 0 0 192 0 0  216 248.1585127201564 1
4
LANG:10001 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,75,0,0,0,0,0
0 4
LANG:10001 16 Comparison trend
LANG:10004 12 比较趋势
LANG:10000 22 Beginn Vergleichstrend
LANG:10027 61 Время начала интервала сравнения
13 121
"Button10"
""
1 1248 1347.158512720156 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
39 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  433 469 521 497

T 
4
LANG:10001 4 View
LANG:10004 6 视图
LANG:10000 8 Anzeigen
LANG:10027 15 На экран
"
main()
{
  time TimeRangeStart, TimeRangeEnd;
  time tComp, tOffset;	// fneun 130701 neu für Vergleichstrend
  dyn_dyn_anytype transfer;
  string transferstring, DP;
  dyn_int diSelectedLines;
  int type, state, pos;
  string s;
  bool bIsDollarCurve;
  bool bCompActive;		// fneun 130701 neu für Vergleichstrend
  dyn_string dsReturn;
  dyn_float dfReturn;

diSelectedLines[1]= selectedLine.text;         
  
//setTrace(2);  
  
if (dynlen(diSelectedLines)>0)
  if ( getUserPermission(1))        // Nur wenn ein Wert selektiert ist
  {

      getValue(\"trendSelect\",\"cellValueRC\",diSelectedLines[1],\"dp\",DP);

      // Synchronisation auf Layer 1

      getTimeRange(TimeRangeStart, TimeRangeEnd, type);

	  // fneun 130701 neu für Vergleichstrend ---
  	  tComp=makeTime(tic_year.text,tic_month.text,tic_day.text,tic_hour.text,tic_minute.text,tic_second.text);
      getValue( \"chkCompActive\", \"state\", 0, bCompActive );
      if (bCompActive)
        tOffset = TimeRangeStart - tComp;
      else
        tOffset = 0;  
	  // ---


      if (TimeRangeStart > getCurrentTime())
         ChildPanelOnCentralModalReturn(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"ac\",\"time>now\"),getCatStr(\"general\",\"cancel\")), dsReturn, dfReturn);
	  else if (TimeRangeEnd-TimeRangeStart > 86400*365*2)
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeMax\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
	  else if (TimeRangeEnd<TimeRangeStart)
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeMax<Min\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
	  // fneun 130701 neu für Vergleichstrend ---
	  else if (bCompActive && !(tComp<TimeRangeStart))
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeComp<Min\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
      //
	  else
	  {
	  
		  calcStateFromTime(TimeRangeStart, TimeRangeEnd, state, pos);
	 	  trendStyle.selectedPos	= pos;
    
		    dpSet(DP+\".StartTime:_original.._value\",makeDynTime(TimeRangeStart,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,tComp),   // fneun 130701 tComp   hinzu neu für Vergleichstrend ---
		          DP+\".EndTime:_original.._value\",makeDynTime(TimeRangeEnd,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,tOffset),     // fneun 130701 tOffset hinzu neu für Vergleichstrend ---
		          DP+\".TrendType:_original.._value\", pos);
		
		    dpGet(DP+\".DP:_online.._value\",transfer[3],
		          DP+\".Compression:_online.._value\",transfer[4],
		          DP+\".ColorStyle:_online.._value\",transfer[5],
		          DP+\".LineStyle:_online.._value\",transfer[6],
		          DP+\".FillStyle:_online.._value\",transfer[7],
		          DP+\".StartTime:_online.._value\",transfer[8],
		          DP+\".EndTime:_online.._value\",transfer[9],
		          DP+\".CurveScale:_online.._value\",transfer[10],
		          DP+\".Scale:_online.._value\",transfer[11],
		          DP+\".TrendType:_online.._value\",transfer[2][1]);
		    transfer[1] = makeDynString(DP);
		
		    s= transfer[3];              // Stringcasting
		        bIsDollarCurve = (strpos(s,\"$\")>-1);   // feststellen ob $ im DP vorkommt
		
		    if (bIsDollarCurve)
		    {
		     ChildPanelOnCentral(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"ac\",\"permissionDollar\"),getCatStr(\"general\",\"cancel\")));
		    }
		    else
		    {
		      mergeToString(transferstring, transfer);
		      dpSet(\"_VarTrendOpen.UiNumber:_original.._value\",myUiNumber(),
		            \"_VarTrendOpen.PanelName:_original.._value\",myModuleName(),
		            \"_VarTrendOpen.TrendData:_original.._value\",transferstring);
		       PanelOff();
		    }
  
  
      }
  }
  else
  {
      ChildPanelOnCentral(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"general\",\"permission\"),getCatStr(\"general\",\"cancel\")));
  }
}














" 0
 E E E
13 238
"Button11"
""
1 1257 1381.158512720156 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
34 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  343 469 431 497

T 
4
LANG:10001 9 Forward >
LANG:10004 7 前进>
LANG:10000 8 Weiter >
LANG:10027 14 Вперед >
"main()
{
bool bthirdPage = tic_year.visible;

 	// fneun 130701 neu für Vergleichstrend ---
    setMultiValue(\"tic_year\",   \"visible\", !bthirdPage,
                  \"tic_month\",  \"visible\", !bthirdPage,
                  \"tic_day\",    \"visible\", !bthirdPage,
                  \"tic_hour\",   \"visible\", !bthirdPage,
                  \"tic_minute\", \"visible\", !bthirdPage,
                  \"tic_second\", \"visible\", !bthirdPage,
                  \"btTakeBegin\",\"visible\", !bthirdPage,
                  \"chkCompActive\",\"visible\", !bthirdPage,
                  \"Text23\",     \"visible\", !bthirdPage,
                  
                  \"Text14\",     \"visible\", bthirdPage,
									\"tie_today\",  \"visible\", bthirdPage,
									\"tie_year\",   \"visible\", bthirdPage,
									\"tie_month\",  \"visible\", bthirdPage,
									\"tie_day\",    \"visible\", bthirdPage,
									\"tie_hour\",   \"visible\", bthirdPage,
									\"tie_minute\", \"visible\", bthirdPage,
									\"tie_second\", \"visible\", bthirdPage,
									\"Button11\",   \"enabled\", bthirdPage ); 
}




" 0
 E E E
13 61
"Button1"
""
1 1473 1813.158512720156 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
31 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  253 469 341 497

T 
4
LANG:10001 6 < Back
LANG:10004 6 < Back
LANG:10000 9 < Zurück
LANG:10027 12 < Назад
"main()
{
  time t1, t2;
  time tComp, tOffset;	// fneun 130701 neu für Vergleichstrend
  bool bCompActive;		// fneun 130701 neu für Vergleichstrend
  bool state;
  int pos;
  dyn_string dsReturn;
  dyn_float dfReturn;
  dyn_int diSelectedLines;
  string DP;
  bool bthirdPage = tic_year.visible;

 	// fneun 130701 neu für Vergleichstrend ---

  if (bthirdPage)									// if Vergleichstrend visible: just switch visibility
  {
	  setMultiValue(\"tic_year\",   \"visible\", !bthirdPage,
                  \"tic_month\",  \"visible\", !bthirdPage,
                  \"tic_day\",    \"visible\", !bthirdPage,
                  \"tic_hour\",   \"visible\", !bthirdPage,
                  \"tic_minute\", \"visible\", !bthirdPage,
                  \"tic_second\", \"visible\", !bthirdPage,
                  \"btTakeBegin\",\"visible\", !bthirdPage,
                  \"chkCompActive\",\"visible\", !bthirdPage,
                  \"Text23\",     \"visible\", !bthirdPage,
                  
                  \"Text14\",     \"visible\", bthirdPage,
									\"tie_today\",  \"visible\", bthirdPage,
									\"tie_year\",   \"visible\", bthirdPage,
									\"tie_month\",  \"visible\", bthirdPage,
									\"tie_day\",    \"visible\", bthirdPage,
									\"tie_hour\",   \"visible\", bthirdPage,
									\"tie_minute\", \"visible\", bthirdPage,
									\"tie_second\", \"visible\", bthirdPage,
									\"Button11\",   \"enabled\", bthirdPage ); 
		return;
	}
  
  
  
  


diSelectedLines[1]= selectedLine.text;         
  
  
if (dynlen(diSelectedLines)>0)
  {
	    
	  getTimeRange(t1, t2, state);

	  // fneun 130701 neu für Vergleichstrend ---
  	  tComp=makeTime(tic_year.text,tic_month.text,tic_day.text,tic_hour.text, tic_minute.text,tic_second.text);
      getValue( \"chkCompActive\", \"state\", 0, bCompActive );
      if (bCompActive)
        tOffset = t1 - tComp;
      else
        tOffset = 0;  
	  //
	
      if (t1 > getCurrentTime())
         ChildPanelOnCentralModalReturn(\"vision/MessageWarning\",getCatStr(\"va\",\"headerPanelhost\"),makeDynString(getCatStr(\"ac\",\"time>now\"),getCatStr(\"general\",\"cancel\")), dsReturn, dfReturn);
      else if (t2-t1 > 86400*365*2)
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeMax\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
	  else if (t1>t2)
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeMax<Min\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
	  // fneun 130701 neu für Vergleichstrend ---
	  else if (bCompActive && !(tComp<t1))
	  {
	  		ChildPanelOnCentralModalReturn(\"vision/MessageInfo1\",	getCatStr(\"ac\",\"error\"),
									makeDynString(getCatStr(\"ac\",\"timeComp<Min\"), 
									getCatStr(\"general\",\"OK\")), dsReturn, dfReturn);
	
	  }
      //
	  else
	  {

		  calcStateFromTime(t1, t2, state, pos);
    	  getValue(\"trendSelect\",\"cellValueRC\",diSelectedLines[1],\"dp\",DP);

	      
	      dpSet(DP+\".StartTime:_original.._value\",makeDynTime(t1,0,0,0,0,0,0,0,tComp),  // fneun 130701 tComp   hinzu neu für Vergleichstrend ---
	          DP+\".EndTime:_original.._value\",makeDynTime(t2,0,0,0,0,0,0,0,tOffset));   // fneun 130701 tOffset hinzu neu für Vergleichstrend ---
	            
//	      DebugN(t1,t2);      
	            
	            
	 	  trendStyle.selectedPos	= pos;
		  SwitchLayer(3, 2);
  }
  }
}

" 0
 E E E
14 122
"selectedLine"
""
1 30 421.1585127201564 E E E 1 E 0 E N "_WindowText" E N "_Window" E E
 E E
1 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 32 Courier New,-1,12,5,40,0,0,0,0,0
LANG:10004 32 Courier New,-1,12,5,40,0,0,0,0,0
LANG:10000 32 Courier New,-1,12,5,40,0,0,0,0,0
LANG:10027 32 Courier New,-1,12,5,40,0,0,0,0,0
0  28 419 132 445
3 "0s" 0 0 0 0 0 -1  E E E
21 189
"tic_year"
""
1 214.1251318565401 288.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
23 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  214 288 278 314
0

E
E
E

N 1970 2038 1 1970 1 1
21 190
"tic_month"
""
1 284 288.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
24 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  284 288 338 314
0

E
E
E

N 1 12 1 1 1 1
21 191
"tic_day"
""
1 344 288.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
25 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  344 288 398 314
0

E
E
E

N 1 31 1 1 1 1
13 192
"btTakeBegin"
""
1 415.1428571428572 329.5870841487277 E E E 0 E 1 E N "_ButtonText" E N "_Button" E E
 E E
30 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  417 337 556 365

T 
4
LANG:10001 17 Copy "Start time"
LANG:10004 24 复制“开始时间”
LANG:10000 20 "Beginn" übernehmen
LANG:10027 30 Исп.время начала
"main()
{
bool   bState;
string y,mo,d,h,mi,s;

  getMultiValue(\"tib_year\",\"text\", y,
                \"tib_month\",\"text\", mo,
                \"tib_day\",\"text\", d,
                \"tib_hour\",\"text\", h,
                \"tib_minute\",\"text\", mi,
                \"tib_second\",\"text\", s);

  setMultiValue(\"tic_year\",\"text\", y,
                \"tic_month\",\"text\", mo,
                \"tic_day\",\"text\", d,
                \"tic_hour\",\"text\", h,
                \"tic_minute\",\"text\", mi,
                \"tic_second\",\"text\", s);
  
               
}" 0
 E E E
21 193
"tic_hour"
""
1 214.1251318565401 338.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
26 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  214 338 278 364
0

E
E
E

N 0 23 1 0 1 1
21 194
"tic_minute"
""
1 284 338.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
27 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  284 338 338 364
0

E
E
E

N 0 59 1 0 1 1
21 195
"tic_second"
""
1 344 338.1585127201564 E E E 0 E 1 E N "_WindowText" E N "_Window" E E
 E E
28 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  344 338 400 364
0

E
E
E

N 0 59 1 0 1 1
20 196
"chkCompActive"
""
1 562 689.1585127201563 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
29 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,40,0,0,0,0,0
0  418 273 557 297
1
T 
4
LANG:10001 16 Comparison trend
LANG:10004 12 比较趋势
LANG:10000 5 Aktiv
LANG:10027 31 Интерв.для сравн.

0 
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 
E E
0 0 0 0 0
1
E "main()
{
bool   bState;
string y,mo,d,h,mi,s;



  getValue( \"\", \"state\", 0, bState );
  setMultiValue(\"tic_year\",\"enabled\", bState,
                \"tic_month\",\"enabled\", bState,
                \"tic_day\",\"enabled\", bState,
                \"tic_hour\",\"enabled\", bState,
                \"tic_minute\",\"enabled\", bState,
                \"tic_second\",\"enabled\", bState,
                \"btTakeBegin\",\"enabled\", bState);

  
    
}" 0

EE0
LAYER, 3 
4
LANG:10001 6 Layer4
LANG:10004 6 Layer4
LANG:10000 6 Layer4
LANG:10027 6 Layer4
0
LAYER, 4 
4
LANG:10001 6 Layer5
LANG:10004 6 Layer5
LANG:10000 6 Layer5
LANG:10027 6 Layer5
0
LAYER, 5 
4
LANG:10001 6 Layer6
LANG:10004 6 Layer6
LANG:10000 6 Layer6
LANG:10027 6 Layer6
0
LAYER, 6 
4
LANG:10001 6 Layer7
LANG:10004 6 Layer7
LANG:10000 6 Layer7
LANG:10027 6 Layer7
0
LAYER, 7 
4
LANG:10001 6 Layer8
LANG:10004 6 Layer8
LANG:10000 6 Layer8
LANG:10027 6 Layer8
0
3 1 "" -1
"layoutAlignment" "AlignCenter"
"" ""
"gedi/ep_funktionsrahmen.pnl" 120 44.604 T 9 1 0 1.14137902319191 36.99999999999999 -38.92757213640358
0
3 9 "" -1
"layoutAlignment" "AlignCenter"
"" ""
"gedi/ep_pic_trend.pnl" 40 60 T 15 1 0 0.997340425531915 -25.00000000000001 -19.68191281175855
0
3 14 "" -1
"layoutAlignment" "AlignCenter"
"" ""
"vision/trend/VT_timerange.pnl" 160 200 T 22 1 0 1 55.99999999999999 -189.8414872798437
0
3 15 "PANEL_REF15" -1
"layoutAlignment" "AlignCenter"
"" ""
"objects_parts/STD_OBJECTS/ButtonBarBackground.pnl" 40 480 T 43 1.250501002004008 0 1 -50.02004008016031 -18.84148727984365
0
0
