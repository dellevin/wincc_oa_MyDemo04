V 14
4
LANG:10001 7 Restore
LANG:10004 6 恢复
LANG:10000 7 Restore
LANG:10027 41 Восстановление данных
PANEL,-1 -1 570 234 N "_3DFace" 0
E E E E E 1 -1 -1 0  0 18
""0  1
E E 3
"CBRef" "0"
"EClose" E
"dpi" "96"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
4
LANG:10001 6 Layer0
LANG:10004 6 Layer0
LANG:10000 6 Layer0
LANG:10027 6 Layer0
6 0
"recMediumRest1"
""
1 401 34 E E E 1 E 1 E N {255,255,255} E N "_Transparent" E E
 E E
1 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 401 34 551 108
6 1
"recDevice1"
""
1 10 20 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
2 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 20 560 120
6 2
"recDevice2"
""
1 11 21 E E E 1 E 1 E N {255,255,255} E N "_Transparent" E E
 E E
4 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 21 561 121
2 3
"lblPath"
""
1 -2 178 E E E 1 E 1 E N "_3DText" E N "_Transparent" E E
 E E
5 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 20 50 80 65
0 2 2 "0s" 0 0 0 192 0 0  20 50 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 12 Source path:
LANG:10004 12 原路径：
LANG:10000 10 Quellpfad:
LANG:10027 9 Путь:
6 4
"recMediumRest2"
""
1 400 33 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
6 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 400 33 550 107
2 5
"lblMediumRest"
""
1 380 284 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
7 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 412 26 535 41
0 2 2 "0s" 0 0 0 192 0 0  412 26 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 19  Media for restore 
LANG:10004 15 恢复的介质
LANG:10000 21  Medium für Restore 
LANG:10027 21  Накопитель
2 6
"lblDevice"
""
1 18 113 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
8 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 20 10 127 25
0 2 2 "0s" 0 0 0 192 0 0  20 10 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 8  Device 
LANG:10004 6 设备
LANG:10000 16  Speichermedium 
LANG:10027 84  Месторасположение резервной копии (источник)
6 7
"recInfo1"
""
1 11 141 E E E 1 E 1 E N {255,255,255} E N "_Transparent" E E
 E E
11 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 141 561 191
6 8
"recInfo2"
""
1 10 140 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
12 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 140 560 190
2 9
"lblInfo"
""
1 20 130 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
16 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  1 E 20 130 50 145
0 2 2 "0s" 0 0 0 192 0 0  20 130 1
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 6  Info 
LANG:10004 4 Info
LANG:10000 6  Info 
LANG:10027 21  Информация
14 10
"dp_path_invis"
""
1 90 42.5 E E E 1 E 1 E N "_WindowText" E N {255,255,255} E E
 E E
0 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  90 42.5 352 72.5
3 "0s" 0 0 0 0 0 -1  E E E
19 11
"dp_device"
""
1 408 48 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
3 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  408 48 508 103
2
T 
4
LANG:10001 3 DAT
LANG:10004 3 DAT
LANG:10000 3 DAT
LANG:10027 3 DAT

0 
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 
E E
0 0 0 0 0
T 
4
LANG:10001 9 HD/MO/JAZ
LANG:10004 9 HD/MO/JAZ
LANG:10000 9 HD/MO/JAZ
LANG:10027 9 HD/MO/JAZ

1 
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 
E E
0 0 0 0 0
1
E "main()
{
  int iPos;
  string s;

  getValue(\"\",\"number\",iPos);

  if ( iPos == 0 )
  {
    setValue(\"pathBrowser\",\"enabled\",FALSE);
    setValue(\"dp_path_invis\",\"backCol\",\"\",\"enabled\",TRUE);
  }
  else
  {
    setValue(\"pathBrowser\",\"enabled\",TRUE);
    setValue(\"dp_path_invis\",\"backCol\",\"\",\"enabled\",TRUE);
  }
}" 0

14 12
"dp_path_vis"
""
1 158 43 E E E 1 E 0 E N "_WindowText" E N "_3DFace" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  158 43 291 72
2 "0s" 0 0 0 0 0 -1  E E E
14 13
"STATUS"
""
1 18 147 E E E 1 E 1 E N "_WindowText" E N "_3DFace" E E
 E E
13 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  18 147 552 177
2 "0s" 0 0 0 0 0 -1  E E E
13 14
"cmdStartRest"
""
1 448 198 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
17 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,50,0,0,0,0,0
0  448 198 560 228

T 
4
LANG:10001 13 Start restore
LANG:10004 12 开始恢复
LANG:10000 15 Restore starten
LANG:10027 12 Начать
"main()
{
  string   proj_path, sPath, device, sTempFileIn, sTempFileOut, sReturn,
           CheckFile,s;
  int      deviceSimu, iReturn, iAccess;

  setValue(\"STATUS\",\"text\",getCatStr(\"va\",\"RestoreRun\"));

  getValue(\"dp_path_invis\",\"text\",sPath);
  getValue(\"dp_device\",\"number\", deviceSimu);
  if (_WIN32)
  {
    strreplace(sPath,\"/\",\"\\\\\");
    if (deviceSimu && substr(sPath,strlen(sPath)-1)!=\"\\\\\") sPath+=\"\\\\\";
  }
  else
  {
    strreplace(sPath,\"\\\\\",\"/\");
    if (deviceSimu && substr(sPath,strlen(sPath)-1)!=\"/\") sPath+=\"/\";
  }
  
  if(deviceSimu == 0) device = \"DAT\";
  else                device = \"FILE\";
  
  proj_path = getPath(proj_path);

  // get files names for temporary files
  sTempFileIn = tmpnam();
  sTempFileOut = tmpnam();
 
  CheckFile = proj_path+\"db\\\\wincc_oa\\\\TypeAndId.dbd\";
  iAccess = access(CheckFile,  F_OK );

  if (iAccess == -1 )  
  { 
    writeFileRestore(sPath, device, proj_path, sTempFileIn);
  
    if (_WIN32) 
      iReturn = system( PVSS_PATH + \"\\\\/bin\\\\\" + getComponentName(MEDIA_COMPONENT) + \" \"+sTempFileIn+\" \"+sTempFileOut); 
    else 
      iReturn = system( PVSS_PATH + \"/bin/\" + getComponentName(MEDIA_COMPONENT) + \" \"+sTempFileIn+\" \"+sTempFileOut); 
    readFileRestore(iReturn, sTempFileOut); 
    sReturn = iReturn;
    s=getCatStr(\"va\",sReturn);
  
    setValue(\"STATUS\",\"text\",((strpos(s,\"catgets error: message key\")==0)?sReturn:s));

    string command ;

    command = \"mkdir \"+PROJ_PATH+\"db/wincc_oa/save\";
    if ( _WIN32 )
      strreplace(command, \"/\", \"\\\\\");
    system(command);

    command = \"mkdir \"+PROJ_PATH+\"db/wincc_oa/alsave\";
    if ( _WIN32 )
      strreplace(command, \"/\", \"\\\\\");
    system(command);

    if ( useNGA() )
    {
      command = \"mkdir \"+PROJ_PATH+\"db/wincc_oa/nga\";
      if ( _WIN32 )
        strreplace(command, \"/\", \"\\\\\");
      system(command);

      command = \"mkdir \"+PROJ_PATH+\"db/wincc_oa/influx\";
      if ( _WIN32 )
        strreplace(command, \"/\", \"\\\\\");
      system(command);

      copyAllFilesRecursive(getPath(DB_REL_PATH,\"influx\",-1,SEARCH_PATH_LEN), getPath(DB_REL_PATH,\"influx\"));
    }

    // delete the temporary files
    if ( access(sTempFileIn,F_OK) == 0)
    {
      remove(sTempFileIn);
    }

    if ( access(sTempFileOut,F_OK) == 0)
    {
      remove(sTempFileOut);
    }
  }
  else
    setValue(\"STATUS\",\"text\",getCatStr(\"va\",\"exist\"));
}


" 0
 E E E
13 15
"pathBrowser"
""
1 942 106.5 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
18 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

1
"layoutAlignment" "AlignCenter"
4
LANG:10001 26 arial,-1,13,5,40,0,0,0,0,0
LANG:10004 26 arial,-1,13,5,40,0,0,0,0,0
LANG:10000 26 arial,-1,13,5,40,0,0,0,0,0
LANG:10027 26 arial,-1,13,5,40,0,0,0,0,0
0  358 43.5 386 71.5

P 
13434828
"pictures/StandardIcons/Open_20.png"
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 
"main()
{
  string sPath;
  int    iErr;
   
  sPath = dp_path_invis.text;
  if ( sPath != \"\")
    strreplace( sPath, \"\\\\\", \"/\" );
  else
    sPath = PROJ_PATH;

  iErr = folderSelector( sPath );

  if(( iErr >= 1 ) && ( strlen( sPath ) > 0 ))
  {
    if (_WIN32)
      strreplace( sPath, \"/\", \"\\\\\" );  // Falls NT -> umwandeln
	   if ( sPath!=\"\" && _WIN32 && substr(sPath,strlen(sPath)-1)!=\"\\\\\")
      sPath+=\"\\\\\"; 
	   if ( sPath!=\"\" && _UNIX && substr(sPath,strlen(sPath)-1)!=\"/\")
      sPath+=\"/\"; 

    dp_path_invis.text = sPath;  
  }
}" 0
 E E E
0
LAYER, 1 
4
LANG:10001 6 Layer1
LANG:10004 6 Layer1
LANG:10000 6 Layer1
LANG:10027 6 Layer1
0
LAYER, 2 
4
LANG:10001 6 Layer2
LANG:10004 6 Layer2
LANG:10000 6 Layer2
LANG:10027 6 Layer2
0
LAYER, 3 
4
LANG:10001 6 Layer3
LANG:10004 6 Layer3
LANG:10000 6 Layer3
LANG:10027 6 Layer3
0
LAYER, 4 
4
LANG:10001 6 Layer4
LANG:10004 6 Layer4
LANG:10000 6 Layer4
LANG:10027 6 Layer4
0
LAYER, 5 
4
LANG:10001 6 Layer5
LANG:10004 6 Layer5
LANG:10000 6 Layer5
LANG:10027 6 Layer5
0
LAYER, 6 
4
LANG:10001 6 Layer6
LANG:10004 6 Layer6
LANG:10000 6 Layer6
LANG:10027 6 Layer6
0
LAYER, 7 
4
LANG:10001 6 Layer7
LANG:10004 6 Layer7
LANG:10000 6 Layer7
LANG:10027 6 Layer7
0
0
