V 13
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 
PANEL,-1 -1 340 516 N "_3DFace" 2
"$dpe"
"$dpt"
E E E E E 1 -1 -1 0  90 20
""0  1
E E 2
"CBRef" "1"
"EClose" E
0 0 0
""
NC
1
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
4
LANG:10001 6 Layer1
LANG:10004 6 Layer1
LANG:10000 6 Layer1
LANG:10027 6 Layer1
6 45
"Border6"
""
1 42 505 E E E 1 E 1 E N "STD_frame_light" E N "_Transparent" E E
 E E
45 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 241 331 321
6 43
"Border4"
""
1 31 191 E E E 1 E 1 E N "STD_frame_light" E N "_Transparent" E E
 E E
43 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 41 331 141
6 41
"Border2"
""
1 21 281 E E E 1 E 1 E N "STD_frame_light" E N "_Transparent" E E
 E E
41 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 141 331 241
2 8
"einheit3"
""
1 293 55 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
8 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 293 55 322 70
0 0 0 "0s" 0 0 0 192 0 0  293 55 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 4 hrs.
LANG:10004 4 hrs.
LANG:10000 4 Std.
LANG:10027 7 Час.
2 9
"txtNS2"
""
1 293 83 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
9 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 293 83 322 98
0 0 0 "0s" 0 0 0 192 0 0  293 83 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 4 hrs.
LANG:10004 4 hrs.
LANG:10000 4 Std.
LANG:10027 7 Час.
2 10
"txtCH2"
""
1 293 112 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 293 112 322 127
0 0 0 "0s" 0 0 0 192 0 0  293 112 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 4 hrs.
LANG:10004 4 hrs.
LANG:10000 4 Std.
LANG:10027 7 Час.
2 37
"gesamt"
""
1 20 53 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
37 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 53 174 68
0 0 0 "0s" 0 0 0 192 0 0  20 53 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 21 Total working hours :
LANG:10004 16 总工作时间:
LANG:10000 23 Betriebsstunden Gesamt:
LANG:10027 41 Общее время наработки:
2 34
"txtNS1"
""
1 20 83 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
34 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 83 151 98
0 0 0 "0s" 0 0 0 192 0 0  20 83 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 20 Next service after :
LANG:10004 22 下一次服务之后:
LANG:10000 21 Nächste Wartung  in:
LANG:10027 36 След.обсл.в течение:
2 36
"txtCH1"
""
1 20 113 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
36 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 113 145 128
0 0 0 "0s" 0 0 0 192 0 0  20 113 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 15 Replace after :
LANG:10004 10 替换后:
LANG:10000 10 Tausch in:
LANG:10027 35 Заменить в течение:
2 17
"Text4"
""
1 20 211 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
17 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 211 150 226
0 0 0 "0s" 0 0 0 192 0 0  20 211 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 19 Value of last day :
LANG:10004 19 昨日最后数值:
LANG:10000 16 Wert vom Vortag:
LANG:10027 33 Знач.предыдущ.дня:
2 23
"einheit1"
""
1 293 185 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
23 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 293 185 322 200
0 0 0 "0s" 0 0 0 192 0 0  293 185 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 4 hrs.
LANG:10004 4 hrs.
LANG:10000 4 Std.
LANG:10027 7 Час.
2 24
"einheit2"
""
1 293 214 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
24 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 293 214 322 229
0 0 0 "0s" 0 0 0 192 0 0  293 214 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 4 hrs.
LANG:10004 4 hrs.
LANG:10000 4 Std.
LANG:10027 7 Час.
2 27
"txtCounterText"
""
1 20 153 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
27 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 153 74 168
0 0 0 "0s" 0 0 0 192 0 0  20 153 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 8 Counter:
LANG:10004 10 计数器:
LANG:10000 8 Zähler:
LANG:10027 15 Счетчик:
2 35
"Text6"
""
1 1 132 E E E 1 E 0 E N "_3DText" E N "_3DFace" E E
 E E
35 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
"// Panel anpassen für Schaltspielzähler
main()
{
  // Prüfen ob Schaltspielzähler gewählt wurde
  if( dpTypeName($dpe)==\"WH_SC1\" && strpos(dpSubStr($dpe,DPSUB_DP),\"SC_\")==0 )
    setMultiValue(\"gesamt\",   \"text\",    getCatStr(\"STD_Symbols\", \"Schaltspiele Gesamt :\"),
                  //\"sc1\",      \"visible\", true,
                  //\"sc2\",      \"visible\", true,
                  \"einheit1\", \"visible\", false,
                  \"einheit2\", \"visible\", false,
                  \"einheit3\", \"visible\", false,
                  \"txtNS2\",   \"visible\", false,
                  \"txtCH2\",   \"visible\", false);
}
" 0
 E 0 1 1 0 0 E U  1 E 2 132 238 147
1 2 2 "0s" 0 0 0 192 0 0  2 132 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 39 Panel anpassen wenn Schaltspielzähler 
LANG:10004 36 画面anpassenwennSchaltspielzähler
LANG:10000 40  Panel anpassen wenn Schaltspielzähler 
LANG:10027 39 Panel anpassen wenn Schaltspielzähler 
6 40
"Border1"
""
1 10 270 E E E 1 E 1 E N "STD_frame_dark" E N "_Transparent" E E
 E E
40 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 140 330 240
6 42
"Border3"
""
1 20 180 E E E 1 E 1 E N "STD_frame_dark" E N "_Transparent" E E
 E E
42 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 40 330 140
6 44
"Border5"
""
1 31 497 E E E 1 E 1 E N "STD_frame_dark" E N "_Transparent" E E
 E E
44 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 240 330 320
6 46
"Border7"
""
1 53 915 E E E 1 E 1 E N "STD_frame_light" E N "_Transparent" E E
 E E
46 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 391 331 471
6 47
"Border8"
""
1 42 905 E E E 1 E 1 E N "STD_frame_dark" E N "_Transparent" E E
 E E
47 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 390 330 470
1 71 0 "" 0
0
1 74 2 "" 0
0
6 57
"Border9"
""
1 43 550 E E E 1 E 1 E N "STD_frame_light" E N "_Transparent" E E
 E E
55 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 11 321 331 391
6 58
"Border10"
""
1 30 544 E E E 1 E 1 E N "STD_frame_dark" E N "_Transparent" E E
 E E
56 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 10 320 330 390
1 76 3 "" 4
1 "message" 1 1 "bool bGeneralFault;

main()
{
  startQuery();
}

startQuery()
{
  int          error;
  string       query=\"SELECT '_original.._value' FROM '\"+$dpe+\"*.cmd.off' WHERE _DPT=\\\"WH_SC_SERVICE\\\"\";
  dyn_errClass eClass;
  
  error=dpQueryConnectAll(\"queryCB\",true,\"OffBitDisplay\",query);
  if (error == -1)
  {	
    eClass = getLastError();    // ungeplanter Fehler!!!!
    throwError(eClass);
  }
}
 
void queryCB(string ident,dyn_dyn_anytype tab)
{
  int          i;
  bool         state=false;
  dyn_errClass eClass = getLastError();

  if ( dynlen(eClass) )
  {
    int errCode ;
 
    if (!bGeneralFault)
    {
      bGeneralFault = TRUE;   // Fehlervermeindung !!
      startQuery();
    }
    else								
    {                        // ungeplanter Fehler!!!!
      throwError(eClass);
	}
    return;
  }
  else
  {
    for(i=2;i<=dynlen(tab);i++)
    {
      state|=tab[i][2];
    }

    this.visible	= state;
    shpLine.visible	= state;
  }
}
" 0
 
0
2 67
"Text7"
""
1 20 350 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
64 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 3 2 1 0 E U  1 E 20 350 89 365
0 0 0 "0s" 0 0 0 192 0 0  20 350 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 11 State bits:
LANG:10004 10 状态位:
LANG:10000 11 Statusbits:
LANG:10027 19 Биты сост.:
2 70
"Text1"
""
1 20 182 E E E 1 E 1 E N "_3DText" E N "_Transparent" E E
 E E
67 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 0 1 E U  0 E 22 182 149 197
0 2 0 "0s" 0 0 0 192 0 0  22 182 1
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0 4
LANG:10001 13 Act. day sum:
LANG:10004 17 动作.日总和:
LANG:10000 15 akt.Tagessumme:
LANG:10027 33 Текущ.дневн.сумма:
13 0
"cmdService"
""
1 178 248 E E E 1 E 1 E N {0,0,0} E N "_Button" E E
 E E
0 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  178 248 322 278

T 
4
LANG:10001 7 Service
LANG:10004 6 服务
LANG:10000 7 Wartung
LANG:10027 24 Обслуживание
"main()
{  
  dyn_float  d_f;          // Rückgabefloat Password-Panel
  dyn_string d_s;         // Rückgabestring Password-Panel
  string     dpService;      // Service Datenpunkt
  bool       licence=false;
  
  licence=whCheckLicence();
  if (!licence)
  {
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(getCatStr(\"STD_Symbols\",\"nolicence\")));
    return;
  }

  if (!getUserPermission(3))
  {
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(getCatStr(\"general\",\"permission\")));
    return;
  }

  ChildPanelOnParentModalReturn(\"objects_parts/STD_OBJECTS/WH_serviceSelect.pnl\",
    getCatStr(\"STD_Symbols\",\"Wartungsauswahl\"),
    rootPanel(),
    makeDynString(\"$DpWH:\"+dpSubStr($dpe,DPSUB_DP)),
    100,100,d_f, d_s);

  if(d_f[1]==-1) return;   // Bei Abbruch hier beenden

  dpService = d_s[1];
  
  whStartService(dpService,d_s[2]);
}" 0
 E E "main()
{
  int dpPerm;
  
  dpGet(\"_System.Auth.Dp:_original.._value\", dpPerm);
  if (!getUserPermission(dpPerm))
  {
    this.enabled=false;
  }
}" 0

13 2
"cmdParam"
""
1 178 278 E E E 1 E 1 E N {0,0,0} E N "_Button" E E
 E E
2 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  178 278 322 308

T 
4
LANG:10001 9 Parameter
LANG:10004 6 参数
LANG:10000 9 Parameter
LANG:10027 16 Параметр
"main() // Berechtigung prüfen
{
  int dpPerm;
  
  if (!getUserPermission(4))
  {
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(getCatStr(\"general\",\"permission\")));
    return;
  }

  else  // Berechtigung ist vorhanden
  {
    string lt=getDpComment($dpe);
    if (lt==\"\") lt=$dpe;
    ChildPanelOnParentModal(\"objects_parts/STD_OBJECTS/WH_SC1_prop.pnl\",
      getCatStr(\"STD_Symbols\", \"Parametereingabe\")+\" \"+lt,
      rootPanel(), makeDynString(\"$dpe:\"+$dpe,\"$dpt:\"+$dpt), 10, 10);
  }
}
" 0
 E E E
14 5
"txtTotal"
""
1 168 48 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
5 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 48 292 75
2 "0s" 0 0 0 2 0 -1  E "main()
{
  if (!dpExists($dpe)) return;
  
  if(dpConnect(\"work\",true,$dpe+\".value.pvssCounter:_online.._value\")==-1)
      setValue(\"\",\"color\",\"_dpdoesnotexist\");
}

work(string dp,int at)
{
 
  string s, format = dpGetFormat($dpe);

  if (format != \"\")
	sprintf(s, format, at);
  else
    s=at;
  this.text = s;
}
" 0
 E
14 6
"txtNextService"
""
1 169 78 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
6 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 78 292 105
2 "0s" 0 0 0 2 0 -1  E "main()
{
  dyn_string service; // Feld aller Watungspunkte des BSZ
  dyn_string service_1_3; // Wartungspunkte Typ 1 & 3
  dyn_string service_2_4; // Wartungspunkte Typ 2 & 4
  int type;         // typemeter des Wartungspunktes
  int timeLeft;           // Restzeit Typ 1
  int k_timeLeft=maxINT();         // kleinste Restzeit          
  int i;                  // Laufvariable     
  int j;                  // Position kleinste TimeLeft
  int length;               // Anzahl der Wartungspunkte 
  int length_1_3;           // Anzahl der Wartungspunkte  
  int length_2_4;           // Anzahl der Wartungspunkte 

  service=dpNames($dpe+\"_*\",\"WH_SC_SERVICE\");

  length=dynlen(service);
  if( length==0 )
  {
    cmdService.enabled=false;
    cmdServiceProtocol.enabled=false;
  }
   
  // Sort service points by type
  for (i=1; i<=length ; i++)
  {
    dpGet( service[i]+\".para.type:_online.._value\",type );
    
    if ( (type==1) || (type==4) || (type==3) )    
      length_1_3 = dynAppend(service_1_3, service[i]);
    
    if ( (type==2) || (type==5)  || (type==6) )    
      length_2_4 = dynAppend(service_2_4, service[i]);
  }

  // Search for and connect to the smallest timeleft of type 1 & 3
  if ( length_1_3 != 0 )
  {
    for ( i=1; i<=length_1_3; i++ )
    {
      dpGet( service_1_3[i]+\".value.timeLeft:_online.._value\",timeLeft );
      if ((timeLeft < k_timeLeft)||(i==1))
      {
        k_timeLeft=timeLeft;
        j=i;
      }
    }
    dpConnect(\"work1\",service_1_3[j]+\".value.timeLeft:_online.._value\",
                      service_1_3[j]+\".para.type:_online.._value\",
                      service_1_3[j]+\".para.interval:_online.._value\");
  }

  // Search for and connect to the smallest timeleft of type 2 & 4
  if ( length_2_4 != 0 )
  {
    for ( i=1; i<=length_2_4; i++ )
    {
      dpGet( service_2_4[i]+\".value.timeLeft:_online.._value\",timeLeft );
      if ((timeLeft < k_timeLeft)||(i==1))
      {
        k_timeLeft=timeLeft;
        j=i;
      }
    }
    dpConnect(\"work2\",service_2_4[j]+\".value.timeLeft:_online.._value\",
                      service_2_4[j]+\".para.type:_online.._value\",
                      service_2_4[j]+\".para.interval:_online.._value\");
  }
}
// nächste Wartung anzeigen
work1(string dp , string timeLeft, string dp2, int type, string dp3, int interval)
{
  int    i=timeLeft;
  time   t;
  string s1=txtNS1.text;
  
  if (type==3 || type==6)
  {
    strreplace(s1,\" after\",\" on\");
    strreplace(s1,\" in\",\" am\");
    txtNS1.text=s1;
    txtNS2.visible=false;
    setPeriod(t,interval*3600);
    timeLeft=formatTime(\"%Y.%m.%d %H:00\",t);
  }
  else
  {
    strreplace(s1,\" on\",\" after\");
    strreplace(s1,\" am\",\" in\");
    txtNS1.text=s1;
    txtNS2.visible=(strpos(dpSubStr(dp,DPSUB_DP),\"SC_\")<0);
  }
  txtNS1.enabled=true;
  txtNS2.enabled=true;
  this.enabled=true;
  this.text=timeLeft;
}


// nächsten Tausch anzeigen
work2(string dp , string timeLeft, string dp2, int type, string dp3, int interval)
{
  int    i=timeLeft;
  time   t;
  string s2=txtCH1.text;
  
  if (type==3 || type==6)
  {
    strreplace(s2,\" after\",\" on\");
    strreplace(s2,\" in\",\" am\");
    txtCH1.text=s2;
    txtCH2.visible=false;
    setPeriod(t,interval*3600);
    timeLeft=formatTime(\"%Y.%m.%d %H:00\",t);
  }
  else
  {
    strreplace(s2,\" on\",\" after\");
    strreplace(s2,\" am\",\" in\");
    txtCH1.text=s2;
    txtCH2.visible=(strpos(dpSubStr(dp,DPSUB_DP),\"SC_\")<0);
  }
  txtCH1.enabled=true;
  txtCH2.enabled=true;
  txtChange.enabled=true;
  txtChange.text=timeLeft;
}

//MN240898" 0
 E
14 7
"txtChange"
""
1 168 108 E E E 0 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
7 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 108 292 135
2 "0s" 0 0 0 2 0 -1  E E E
13 14
"cmdServiceProtocol"
""
1 18 248 E E E 1 E 1 E N {0,0,0} E N "_Button" E E
 E E
14 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  18 248 172 278

T 
4
LANG:10001 16 Service protocol
LANG:10004 6 服务
LANG:10000 17 Wartungsprotokoll
LANG:10027 41 Протокол обслуживания
"main()
{
  string dpe=dpSubStr($dpe,DPSUB_DP);
  bool   licence=false;
  
  licence=whCheckLicence();
  if (!licence)
  {
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(getCatStr(\"STD_Symbols\",\"nolicence\")));
    return;
  }
  
  ChildPanelOnParent(\"objects_parts/STD_OBJECTS/WH_serviceProtocol.pnl\",
    getCatStr(\"STD_Symbols\",\"Wartungsprotokoll\"),
    rootPanel(),
    makeDynString(\"$masch:\"+substr(dpe, 3, strlen(dpe)-3), \"$stdmax:\"+\"10000\", 
                  \"$fill:1\", \"$type:\"+substr(dpe, 0, 2) ) ,10, 10);
}" 0
 E E E
14 15
"txtThisDay"
""
1 168 178 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
15 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 178 292 205
2 "0s" 0 0 0 2 0 -1  E "main()
{
   if(dpConnect(\"work\",true,$dpe+\".wh.C2.SUM:_dp_fct.._interm\")==-1)
      setValue(\"\",\"color\",\"_dpdoesnotexist\");
}

work(string dp, float value)
{
  string s, format = dpGetFormat($dpe);

  if (format != \"\")
	sprintf(s, format, value);
  else
    s=value;
  this.text = s;
}" 0
 E
14 18
"txtLastDay"
""
1 168 208 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
18 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 208 292 235
2 "0s" 0 0 0 2 0 -1  E "main()
{
  if (!dpExists($dpe)) return;
  
  if(dpConnect(\"work\",true,$dpe+\".wh.C2.SUM:_online.._value\")==-1)
      setValue(\"\",\"color\",\"_dpdoesnotexist\");
}

work(string dp,float at)
{
 
  string s, format = dpGetFormat($dpe);

  if (format != \"\")
	sprintf(s, format, at);
  else
    s=at;
  this.text = s;
}" 0
 E
14 28
"txtCounter"
""
1 168 148 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
28 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10004 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10000 32 Courier New,-1,13,5,50,0,0,0,0,0
LANG:10027 32 Courier New,-1,13,5,50,0,0,0,0,0
0  168 148 292 175
2 "0s" 0 0 0 2 0 -1  E "main()
{
  unsigned   type;
  dyn_string param;
  
  if (!dpExists($dpe)) return;

  dpGet($dpe+\".para.type:_online.._value\",type);
  if (type==1)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"plccounter\")+\":\";
    dpConnect(\"setTextCB\",$dpe+\".value.plcCounter:_online.._value\",
                          $dpe+\".para.type:_online.._value\");
  }
  else
  if (type==2)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"plcbit\")+\":\";
    dpConnect(\"setTextCB\",$dpe+\".value.on:_online.._value\",
                          $dpe+\".para.type:_online.._value\");
  }
  else
  if (type==3)
  {
    this.visible=false;
    txtCounterText.visible=false;
  }
  else
  if (type==4)
  {
    dpGet($dpe+\".value.on:_dp_fct.._param\",param);
    if ( dynlen(param)>0 && dpExists(dpSubStr(param[1],DPSUB_DP_EL)) )
      dpConnect(\"speedCB\",param[1]);
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"speed\")+\":\";
    dpConnect(\"setTextCB\",$dpe+\".value.plcCounter:_online.._value\",
                          $dpe+\".para.type:_online.._value\");
  }
  else
  if (type==5)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"switch\")+\":\";
    dpConnect(\"setTextCB\",$dpe+\".value.on:_online.._value\",
                          $dpe+\".para.type:_online.._value\");
  }
}

setTextCB(string dp, anytype at, string dp2, int type)
{
  string s, format = dpGetFormat($dpe);

  if (type==1)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"plccounter\")+\":\";
    if (format != \"\")
      sprintf(s, format, at);
    else
      s=at;
    this.text = s;
  }
  else
  if (type==2)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"plcbit\")+\":\";
    this.backCol=(at)?\"green\":\"_3DFace\";
    this.text=(at)?\"TRUE\":\"FALSE\";;
  }
  else
  if (type==3)
  {
  }
  else
  if (type==4)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"speed\")+\":\";
    this.backCol=(at)?\"green\":\"_3DFace\";
    if (format != \"\")
      sprintf(s, format, at);
    else
      s=at;
    this.text = s;
  }
  else
  if (type==5)
  {
    txtCounterText.text=getCatStr(\"STD_Symbols\",\"switch\")+\":\";
    this.backCol=(at)?\"green\":\"_3DFace\";
    this.text = (at)?\"TRUE\":\"FALSE\";
  }
  
}

speedCB(string dp1, float speed)
{
  this.text=speed;
}
" 0
 E
13 48
"cmdClose"
""
1 709 2088 E E E 1 E 0 E N "_ButtonText" E N "_Button" E E
 E E
48 0 0 0 27 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  108 478 212 508

T 
4
LANG:10001 5 Close
LANG:10004 6 关闭
LANG:10000 10 Schließen
LANG:10027 14 Закрыть
"main()
{
PanelOff();
}" 0
 E E "main()
{
  this.visible = true;
}" 0

13 49
"cmdHelp"
""
1 1356 2088 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
49 0 0 0 112 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  218 478 322 508

T 
4
LANG:10001 4 Help
LANG:10004 6 帮助
LANG:10000 5 Hilfe
LANG:10027 14 Справка
"main()
{
  std_help($dpt+\"_front\");
}
" 0
 E E E
1 72 1 "" 0
0
13 56
"cmdReset"
""
1 20 280 E E E 1 E 1 E N "_ButtonText" E N "_Button" E E
 E E
54 0 0 0 0 0
E E E
0
3
LANG:10000 0 
LANG:10001 0 
LANG:10027 0 

0
4
LANG:10001 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10004 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10000 26 Arial,-1,13,5,50,0,0,0,0,0
LANG:10027 26 Arial,-1,13,5,50,0,0,0,0,0
0  18 278 172 308

T 
4
LANG:10001 17 Reset PLC-counter
LANG:10004 18 重置PLC计数器
LANG:10000 23 SPS-Zähler rücksetzen
LANG:10027 38 Сбросить счетчик ПЛК
"main()
{
  dyn_float  df;
  dyn_string ds;
   
  if (!getUserPermission(4))
  {
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(getCatStr(\"general\",\"permission\")));
    return;
  }

  ChildPanelOnCentralModalReturn(\"vision/MessageInfo\",
       getCatStr(\"STD_Symbols\",\"question\"),
    makeDynString(getCatStr(\"STD_Symbols\",\"suretoresetplc\"),
                  getCatStr(\"para\",\"yes\"),
                  getCatStr(\"para\",\"no\")),
    df,ds);
  if (df[1]==0)
    return;
  else
  {
    dpSet($dpe+\".cmd.resetPLC:_original.._value\", true);
    STD_logCmd($dpe+\".cmd.resetPLC\", 1);

// !!! delete next lines if all ready !!! //
    ChildPanelOnCentralModal(\"vision/MessageWarning\",
      getCatStr(\"para\",\"warning\"),
      makeDynString(\"!!! Please delete line for resetting\\n\"+
                    \"plcCounter from clickScript of this button!!!\"));
    dpSet($dpe+\".value.plcCounter:_original.._value\", 0);
  }
}" 0
 E E "main()
{
  bool         resetAddressActive;
  dyn_errClass eClass;
  
  // Is PLC-reset active?
  dpGet($dpe+\".cmd.resetPLC:_address.._active\",resetAddressActive);
  eClass=getLastError();
  if (dynlen(eClass)>0) resetAddressActive=false;
  cmdReset.enabled=resetAddressActive;
}" 0

0
LAYER, 1 
4
LANG:10001 6 Layer2
LANG:10004 6 Layer2
LANG:10000 6 Layer2
LANG:10027 6 Layer2
1 78 5 "" 20
1 "message" 1 1 "main()
{
if (dpExists($dpe)) dpConnect(\"setColorInvalid\",$dpe+\":_original.._bad\");
}

setColorInvalid(string dp, bool invalid)
{
	this.visible   = invalid;
}" 0
 
0
1 79 6 "" 7
0
0
LAYER, 2 
4
LANG:10001 6 Layer3
LANG:10004 6 Layer3
LANG:10000 6 Layer3
LANG:10027 6 Layer3
0
LAYER, 3 
4
LANG:10001 6 Layer4
LANG:10004 6 Layer4
LANG:10000 6 Layer4
LANG:10027 6 Layer4
0
LAYER, 4 
4
LANG:10001 6 Layer5
LANG:10004 6 Layer5
LANG:10000 6 Layer5
LANG:10027 6 Layer5
0
LAYER, 5 
4
LANG:10001 6 Layer6
LANG:10004 6 Layer6
LANG:10000 6 Layer6
LANG:10027 6 Layer6
0
LAYER, 6 
4
LANG:10001 6 Layer7
LANG:10004 6 Layer7
LANG:10000 6 Layer7
LANG:10027 6 Layer7
0
LAYER, 7 
4
LANG:10001 6 Layer8
LANG:10004 6 Layer8
LANG:10000 6 Layer8
LANG:10027 6 Layer8
0
3 0 "Group2" -1
"" ""
"objects/STD_PARTS/PANEL_HEADER_DPCOMMENT.pnl" 10 10 T 50 1 0 1 40 20
1
"$dpe""$dpe"
3 1 "Group4" -1
"" ""
"objects/STD_PARTS/PANEL_TRENDSELECT.pnl" 20 465 T 51 1 0 1 40 168
2
"$dpe""$dpe+\".wh.value\""
"$dpt""$dpt"
3 2 "Group6" -1
"" ""
"objects/STD_PARTS/PANEL_CORRVALUESSELECT.pnl" 21 510 T 52 1 0 1 39 190
2
"$dpe""$dpe+\".wh\""
"$dpt""$dpt"
3 3 "Group7" -1
"" ""
"objects/STD_PARTS/ELEMENT_OFF_ALERT.pnl" 145 20 T 57 1 0 1 -20 335
1
"$dpe""$dpe"
3 5 "Group9" -1
"" ""
"objects/STD_PARTS/ELEMENT_INVALID.pnl" 160 25 T 59 1 0 1 -70 335
1
"$dpe""$dpe+\".wh.value\""
3 6 "" -1
"" ""
"objects/STD_PARTS/ELEMENT_DEFAULT.pnl" 162 333 T 68 1 0 1 -12 27
1
"$dpe""$dpe+\".wh.value\""
0
